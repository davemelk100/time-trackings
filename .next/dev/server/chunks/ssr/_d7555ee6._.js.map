{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline:\n          'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button'\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAUF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/lib/supabase.ts"],"sourcesContent":["import { createClient as createSupabaseClient, type SupabaseClient } from \"@supabase/supabase-js\"\nimport type { TimeEntry, Subscription, Attachment, Client, Payable, Invoice, Link } from \"./project-data\"\n\nexport function createClient() {\n  return createSupabaseClient(\n    import.meta.env.VITE_SUPABASE_URL,\n    import.meta.env.VITE_SUPABASE_ANON_KEY,\n  )\n}\n\n// ── Clients CRUD ────────────────────────────────────────────────────\n\nexport interface ClientRow {\n  id: string\n  name: string\n  hourly_rate: number | null\n  flat_rate: number | null\n  billing_period_start: string | null\n  billing_period_end: string | null\n  created_at: string\n}\n\nexport function rowToClient(row: ClientRow): Client {\n  return {\n    id: row.id,\n    name: row.name,\n    hourlyRate: row.hourly_rate != null ? Number(row.hourly_rate) : null,\n    flatRate: row.flat_rate != null ? Number(row.flat_rate) : null,\n    billingPeriodStart: row.billing_period_start ?? null,\n    billingPeriodEnd: row.billing_period_end ?? null,\n  }\n}\n\nexport async function fetchClients(supabase: SupabaseClient): Promise<Client[]> {\n  const { data, error } = await supabase\n    .from(\"clients\")\n    .select(\"*\")\n    .order(\"name\", { ascending: true })\n\n  if (error) throw error\n  return (data as ClientRow[]).map(rowToClient)\n}\n\nexport async function insertClient(\n  supabase: SupabaseClient,\n  client: { id: string; name: string; hourlyRate: number | null; flatRate: number | null },\n): Promise<void> {\n  const { error } = await supabase.from(\"clients\").insert({\n    id: client.id,\n    name: client.name,\n    hourly_rate: client.hourlyRate,\n    flat_rate: client.flatRate,\n  })\n  if (error) throw error\n}\n\nexport async function deleteClient(supabase: SupabaseClient, id: string): Promise<void> {\n  const { error } = await supabase.from(\"clients\").delete().eq(\"id\", id)\n  if (error) throw error\n}\n\nexport async function updateClientRate(\n  supabase: SupabaseClient,\n  clientId: string,\n  hourlyRate: number | null,\n  flatRate: number | null,\n): Promise<void> {\n  const { error } = await supabase\n    .from(\"clients\")\n    .update({ hourly_rate: hourlyRate, flat_rate: flatRate })\n    .eq(\"id\", clientId)\n  if (error) throw error\n}\n\nexport async function updateClientBillingPeriodStart(\n  supabase: SupabaseClient,\n  clientId: string,\n  date: string | null,\n): Promise<void> {\n  const { error } = await supabase\n    .from(\"clients\")\n    .update({ billing_period_start: date })\n    .eq(\"id\", clientId)\n  if (error) throw error\n}\n\nexport async function updateClientBillingPeriodEnd(\n  supabase: SupabaseClient,\n  clientId: string,\n  date: string | null,\n): Promise<void> {\n  const { error } = await supabase\n    .from(\"clients\")\n    .update({ billing_period_end: date })\n    .eq(\"id\", clientId)\n  if (error) throw error\n}\n\n// ── snake_case ↔ camelCase mappers ──────────────────────────────────\n\nexport interface TimeEntryRow {\n  id: string\n  client_id: string\n  date: string\n  start_time: string\n  end_time: string\n  time_range: string\n  total_hours: number\n  tasks: string\n  notes: string\n  attachments: Attachment[]\n  links: Link[]\n}\n\nexport interface SubscriptionRow {\n  id: string\n  client_id: string\n  name: string\n  category: string\n  billing_cycle: \"monthly\" | \"annual\"\n  amount: number\n  renewal_date: string | null\n  notes: string\n  attachments: Attachment[]\n  links: Link[]\n}\n\nexport function rowToTimeEntry(row: TimeEntryRow): TimeEntry {\n  return {\n    id: row.id,\n    date: row.date,\n    startTime: row.start_time,\n    endTime: row.end_time,\n    timeRange: row.time_range,\n    totalHours: Number(row.total_hours),\n    tasks: row.tasks,\n    notes: row.notes,\n    attachments: Array.isArray(row.attachments) ? row.attachments : [],\n    links: Array.isArray(row.links) ? row.links : [],\n  }\n}\n\nexport function timeEntryToRow(entry: TimeEntry, clientId: string): Omit<TimeEntryRow, \"id\"> & { id?: string } {\n  return {\n    id: entry.id,\n    client_id: clientId,\n    date: entry.date,\n    start_time: entry.startTime,\n    end_time: entry.endTime,\n    time_range: entry.timeRange,\n    total_hours: entry.totalHours,\n    tasks: entry.tasks,\n    notes: entry.notes,\n    attachments: entry.attachments ?? [],\n    links: entry.links ?? [],\n  }\n}\n\nexport function rowToSubscription(row: SubscriptionRow): Subscription {\n  return {\n    id: row.id,\n    name: row.name,\n    category: row.category,\n    billingCycle: row.billing_cycle,\n    amount: Number(row.amount),\n    renewalDate: row.renewal_date ?? \"\",\n    notes: row.notes,\n    attachments: Array.isArray(row.attachments) ? row.attachments : [],\n    links: Array.isArray(row.links) ? row.links : [],\n  }\n}\n\nexport function subscriptionToRow(sub: Subscription, clientId: string): Omit<SubscriptionRow, \"id\"> & { id?: string } {\n  return {\n    id: sub.id,\n    client_id: clientId,\n    name: sub.name,\n    category: sub.category,\n    billing_cycle: sub.billingCycle,\n    amount: sub.amount,\n    renewal_date: sub.renewalDate || null,\n    notes: sub.notes,\n    attachments: sub.attachments ?? [],\n    links: sub.links ?? [],\n  }\n}\n\n// ── Cross-client queries (for reports) ──────────────────────────────\n\nexport interface TimeEntryWithClient extends TimeEntry {\n  clientId: string\n}\n\nexport interface SubscriptionWithClient extends Subscription {\n  clientId: string\n}\n\nexport interface PayableWithClient extends Payable {\n  clientId: string\n}\n\nexport async function fetchAllTimeEntries(supabase: SupabaseClient): Promise<TimeEntryWithClient[]> {\n  const { data, error } = await supabase\n    .from(\"time_entries\")\n    .select(\"*\")\n    .order(\"date\", { ascending: false })\n\n  if (error) throw error\n  return (data as (TimeEntryRow & { client_id: string })[]).map((row) => ({\n    ...rowToTimeEntry(row),\n    clientId: row.client_id,\n  }))\n}\n\nexport async function fetchAllSubscriptions(supabase: SupabaseClient): Promise<SubscriptionWithClient[]> {\n  const { data, error } = await supabase\n    .from(\"subscriptions\")\n    .select(\"*\")\n    .order(\"name\", { ascending: true })\n\n  if (error) throw error\n  return (data as (SubscriptionRow & { client_id: string })[]).map((row) => ({\n    ...rowToSubscription(row),\n    clientId: row.client_id,\n  }))\n}\n\nexport async function fetchAllPayables(supabase: SupabaseClient): Promise<PayableWithClient[]> {\n  const { data, error } = await supabase\n    .from(\"payables\")\n    .select(\"*\")\n    .order(\"date\", { ascending: false })\n\n  if (error) throw error\n  return (data as (PayableRow & { client_id: string })[]).map((row) => ({\n    ...rowToPayable(row),\n    clientId: row.client_id,\n  }))\n}\n\n// ── Time Entries CRUD ───────────────────────────────────────────────\n\nexport async function fetchTimeEntries(supabase: SupabaseClient, clientId: string): Promise<TimeEntry[]> {\n  const { data, error } = await supabase\n    .from(\"time_entries\")\n    .select(\"*\")\n    .eq(\"client_id\", clientId)\n    .is(\"invoice_id\", null)\n    .order(\"date\", { ascending: true })\n\n  if (error) throw error\n  return (data as TimeEntryRow[]).map(rowToTimeEntry)\n}\n\nexport async function upsertTimeEntry(supabase: SupabaseClient, entry: TimeEntry, clientId: string): Promise<void> {\n  const row = timeEntryToRow(entry, clientId)\n  const { error } = await supabase.from(\"time_entries\").upsert(row)\n  if (error) throw error\n}\n\nexport async function deleteTimeEntry(supabase: SupabaseClient, id: string): Promise<void> {\n  const { error } = await supabase.from(\"time_entries\").delete().eq(\"id\", id)\n  if (error) throw error\n}\n\nexport async function seedTimeEntries(supabase: SupabaseClient, entries: TimeEntry[], clientId: string): Promise<void> {\n  const rows = entries.map((e) => {\n    const row = timeEntryToRow(e, clientId)\n    // Let Supabase generate UUIDs for seeded data\n    delete row.id\n    return row\n  })\n  const { error } = await supabase.from(\"time_entries\").insert(rows)\n  if (error) throw error\n}\n\n// ── Subscriptions CRUD ──────────────────────────────────────────────\n\nexport async function fetchSubscriptions(supabase: SupabaseClient, clientId: string): Promise<Subscription[]> {\n  const { data, error } = await supabase\n    .from(\"subscriptions\")\n    .select(\"*\")\n    .eq(\"client_id\", clientId)\n    .is(\"invoice_id\", null)\n    .order(\"name\", { ascending: true })\n\n  if (error) throw error\n  return (data as SubscriptionRow[]).map(rowToSubscription)\n}\n\nexport async function upsertSubscription(supabase: SupabaseClient, sub: Subscription, clientId: string): Promise<void> {\n  const row = subscriptionToRow(sub, clientId)\n  const { error } = await supabase.from(\"subscriptions\").upsert(row)\n  if (error) throw error\n}\n\nexport async function deleteSubscription(supabase: SupabaseClient, id: string): Promise<void> {\n  const { error } = await supabase.from(\"subscriptions\").delete().eq(\"id\", id)\n  if (error) throw error\n}\n\nexport async function seedSubscriptions(supabase: SupabaseClient, subs: Subscription[], clientId: string): Promise<void> {\n  const rows = subs.map((s) => {\n    const row = subscriptionToRow(s, clientId)\n    delete row.id\n    return row\n  })\n  const { error } = await supabase.from(\"subscriptions\").insert(rows)\n  if (error) throw error\n}\n\n// ── Payables CRUD ───────────────────────────────────────────────────\n\nexport interface PayableRow {\n  id: string\n  client_id: string\n  description: string\n  amount: number\n  date: string\n  paid: boolean\n  paid_date: string | null\n  notes: string\n  attachments: Attachment[]\n  links: Link[]\n}\n\nexport function rowToPayable(row: PayableRow): Payable {\n  return {\n    id: row.id,\n    description: row.description,\n    amount: Number(row.amount),\n    date: row.date,\n    paid: row.paid,\n    paidDate: row.paid_date ?? \"\",\n    notes: row.notes,\n    attachments: Array.isArray(row.attachments) ? row.attachments : [],\n    links: Array.isArray(row.links) ? row.links : [],\n  }\n}\n\nexport function payableToRow(p: Payable, clientId: string): Omit<PayableRow, \"id\"> & { id?: string } {\n  return {\n    id: p.id,\n    client_id: clientId,\n    description: p.description,\n    amount: p.amount,\n    date: p.date,\n    paid: p.paid,\n    paid_date: p.paidDate || null,\n    notes: p.notes,\n    attachments: p.attachments ?? [],\n    links: p.links ?? [],\n  }\n}\n\nexport async function fetchPayables(supabase: SupabaseClient, clientId: string): Promise<Payable[]> {\n  const { data, error } = await supabase\n    .from(\"payables\")\n    .select(\"*\")\n    .eq(\"client_id\", clientId)\n    .is(\"invoice_id\", null)\n    .order(\"date\", { ascending: false })\n\n  if (error) throw error\n  return (data as PayableRow[]).map(rowToPayable)\n}\n\nexport async function upsertPayable(supabase: SupabaseClient, payable: Payable, clientId: string): Promise<void> {\n  const row = payableToRow(payable, clientId)\n  const { error } = await supabase.from(\"payables\").upsert(row)\n  if (error) throw error\n}\n\nexport async function deletePayable(supabase: SupabaseClient, id: string): Promise<void> {\n  const { error } = await supabase.from(\"payables\").delete().eq(\"id\", id)\n  if (error) throw error\n}\n\nexport async function deletePayableByMatch(\n  supabase: SupabaseClient,\n  clientId: string,\n  description: string,\n  amount: number,\n  date: string,\n): Promise<void> {\n  const { error } = await supabase\n    .from(\"payables\")\n    .delete()\n    .eq(\"client_id\", clientId)\n    .eq(\"description\", description)\n    .eq(\"amount\", amount)\n    .eq(\"date\", date)\n  if (error) throw error\n}\n\nexport async function updateNextierMirror(\n  supabase: SupabaseClient,\n  oldDescription: string,\n  oldAmount: number,\n  oldDate: string,\n  updated: { description: string; amount: number; date: string; notes: string; attachments: Attachment[]; links?: Link[] },\n): Promise<void> {\n  const { error } = await supabase\n    .from(\"payables\")\n    .update({\n      description: updated.description,\n      amount: updated.amount,\n      date: updated.date,\n      notes: updated.notes,\n      attachments: updated.attachments,\n      links: updated.links ?? [],\n    })\n    .eq(\"client_id\", \"nextier\")\n    .eq(\"description\", oldDescription)\n    .eq(\"amount\", oldAmount)\n    .eq(\"date\", oldDate)\n  if (error) throw error\n}\n\n// ── Attachment Storage ──────────────────────────────────────────────\n\nexport async function uploadAttachment(\n  supabase: SupabaseClient,\n  file: File,\n  clientId: string,\n  entryId: string,\n): Promise<Attachment> {\n  const timestamp = Date.now()\n  const safeName = file.name.replace(/[^a-zA-Z0-9._-]/g, \"_\")\n  const path = `${clientId}/${entryId}/${timestamp}-${safeName}`\n\n  const { error } = await supabase.storage.from(\"receipts\").upload(path, file)\n  if (error) throw error\n\n  return {\n    name: file.name,\n    path,\n    size: file.size,\n    uploadedAt: new Date().toISOString(),\n  }\n}\n\nexport function getAttachmentUrl(supabase: SupabaseClient, path: string): string {\n  const { data } = supabase.storage.from(\"receipts\").getPublicUrl(path)\n  return data.publicUrl\n}\n\nexport async function deleteAttachment(supabase: SupabaseClient, path: string): Promise<void> {\n  const { error } = await supabase.storage.from(\"receipts\").remove([path])\n  if (error) throw error\n}\n\nexport async function deleteAllAttachments(supabase: SupabaseClient, attachments: Attachment[]): Promise<void> {\n  if (attachments.length === 0) return\n  const paths = attachments.map((a) => a.path)\n  const { error } = await supabase.storage.from(\"receipts\").remove(paths)\n  if (error) throw error\n}\n\n// ── Invoices CRUD ───────────────────────────────────────────────────\n\nexport interface InvoiceRow {\n  id: string\n  client_id: string\n  invoice_number: string\n  period_start: string | null\n  period_end: string | null\n  total_time: number\n  total_subscriptions: number\n  total_payables: number\n  grand_total: number\n  notes: string\n  created_at: string\n}\n\nexport function rowToInvoice(row: InvoiceRow): Invoice {\n  return {\n    id: row.id,\n    clientId: row.client_id,\n    invoiceNumber: row.invoice_number,\n    periodStart: row.period_start ?? \"\",\n    periodEnd: row.period_end ?? \"\",\n    totalTime: Number(row.total_time),\n    totalSubscriptions: Number(row.total_subscriptions),\n    totalPayables: Number(row.total_payables),\n    grandTotal: Number(row.grand_total),\n    notes: row.notes,\n    createdAt: row.created_at,\n  }\n}\n\nexport async function fetchInvoices(supabase: SupabaseClient, clientId: string): Promise<Invoice[]> {\n  const { data, error } = await supabase\n    .from(\"invoices\")\n    .select(\"*\")\n    .eq(\"client_id\", clientId)\n    .order(\"created_at\", { ascending: false })\n\n  if (error) throw error\n  return (data as InvoiceRow[]).map(rowToInvoice)\n}\n\nexport async function fetchInvoice(supabase: SupabaseClient, invoiceId: string): Promise<Invoice | null> {\n  const { data, error } = await supabase\n    .from(\"invoices\")\n    .select(\"*\")\n    .eq(\"id\", invoiceId)\n    .single()\n\n  if (error) {\n    if (error.code === \"PGRST116\") return null\n    throw error\n  }\n  return rowToInvoice(data as InvoiceRow)\n}\n\nexport async function fetchAllInvoices(supabase: SupabaseClient): Promise<Invoice[]> {\n  const { data, error } = await supabase\n    .from(\"invoices\")\n    .select(\"*\")\n    .order(\"created_at\", { ascending: false })\n\n  if (error) throw error\n  return (data as InvoiceRow[]).map(rowToInvoice)\n}\n\nexport async function updateInvoice(\n  supabase: SupabaseClient,\n  invoiceId: string,\n  updates: { total_time?: number; grand_total?: number; notes?: string },\n): Promise<Invoice> {\n  const { data, error } = await supabase\n    .from(\"invoices\")\n    .update(updates)\n    .eq(\"id\", invoiceId)\n    .select()\n    .single()\n\n  if (error) throw error\n  return rowToInvoice(data as InvoiceRow)\n}\n\nexport async function fetchTimeEntriesByInvoice(supabase: SupabaseClient, invoiceId: string): Promise<TimeEntry[]> {\n  const { data, error } = await supabase\n    .from(\"time_entries\")\n    .select(\"*\")\n    .eq(\"invoice_id\", invoiceId)\n    .order(\"date\", { ascending: true })\n\n  if (error) throw error\n  return (data as TimeEntryRow[]).map(rowToTimeEntry)\n}\n\nexport async function fetchSubscriptionsByInvoice(supabase: SupabaseClient, invoiceId: string): Promise<Subscription[]> {\n  const { data, error } = await supabase\n    .from(\"subscriptions\")\n    .select(\"*\")\n    .eq(\"invoice_id\", invoiceId)\n    .order(\"name\", { ascending: true })\n\n  if (error) throw error\n  return (data as SubscriptionRow[]).map(rowToSubscription)\n}\n\nexport async function fetchPayablesByInvoice(supabase: SupabaseClient, invoiceId: string): Promise<Payable[]> {\n  const { data, error } = await supabase\n    .from(\"payables\")\n    .select(\"*\")\n    .eq(\"invoice_id\", invoiceId)\n    .order(\"date\", { ascending: false })\n\n  if (error) throw error\n  return (data as PayableRow[]).map(rowToPayable)\n}\n\nexport async function createInvoice(\n  supabase: SupabaseClient,\n  clientId: string,\n  options: { copySubscriptionsForward?: boolean; notes?: string; hourlyRateOverride?: number; flatRateOverride?: number; rateTbd?: boolean } = {},\n): Promise<Invoice> {\n  const { copySubscriptionsForward = false, notes = \"\", hourlyRateOverride, flatRateOverride, rateTbd = false } = options\n\n  // 1. Fetch current-period data + client info\n  const [entries, subs, payables, clients] = await Promise.all([\n    fetchTimeEntries(supabase, clientId),\n    fetchSubscriptions(supabase, clientId),\n    fetchPayables(supabase, clientId),\n    fetchClients(supabase),\n  ])\n\n  const client = clients.find((c) => c.id === clientId)\n  const hourlyRate = hourlyRateOverride !== undefined ? hourlyRateOverride : (client?.hourlyRate ?? null)\n  const flatRate = flatRateOverride !== undefined ? flatRateOverride : (client?.flatRate ?? null)\n\n  // Guard: don't create an invoice if there's nothing to archive\n  if (entries.length === 0 && subs.length === 0 && payables.length === 0) {\n    throw new Error(\"Nothing to archive – no time entries, subscriptions, or payables in the current period.\")\n  }\n\n  // 2. Compute snapshot totals\n  const totalHours = entries.reduce((sum, e) => sum + e.totalHours, 0)\n  const timeCost = rateTbd ? 0 : (flatRate != null ? flatRate : hourlyRate != null ? totalHours * hourlyRate : 0)\n\n  const monthlySubTotal = subs.reduce((sum, s) => {\n    if (s.billingCycle === \"monthly\") return sum + s.amount\n    return sum + s.amount / 12\n  }, 0)\n  const subscriptionAnnual = monthlySubTotal * 12\n\n  const payablesTotal = payables.reduce((sum, p) => sum + p.amount, 0)\n\n  const isNextier = clientId === \"nextier\"\n  const grandTotal = isNextier ? payablesTotal : timeCost + subscriptionAnnual - payablesTotal\n\n  // 3. Derive period dates from client billing fields, falling back to entry dates / today\n  const dates = entries.map((e) => e.date).filter(Boolean).sort()\n  const periodStart = client?.billingPeriodStart || dates[0] || new Date().toISOString().slice(0, 10)\n  const periodEnd = client?.billingPeriodEnd || new Date().toISOString().slice(0, 10)\n\n  // 4. Generate invoice number\n  const { count } = await supabase\n    .from(\"invoices\")\n    .select(\"*\", { count: \"exact\", head: true })\n    .eq(\"client_id\", clientId)\n  const num = ((count ?? 0) + 1).toString().padStart(3, \"0\")\n  const invoiceNumber = `INV-${clientId}-${num}`\n\n  // 5. Insert invoice row\n  const { data: invoiceData, error: invoiceError } = await supabase\n    .from(\"invoices\")\n    .insert({\n      client_id: clientId,\n      invoice_number: invoiceNumber,\n      period_start: periodStart,\n      period_end: periodEnd,\n      total_time: Math.round(timeCost * 100) / 100,\n      total_subscriptions: Math.round(subscriptionAnnual * 100) / 100,\n      total_payables: Math.round(payablesTotal * 100) / 100,\n      grand_total: Math.round(grandTotal * 100) / 100,\n      notes,\n    })\n    .select()\n    .single()\n\n  if (invoiceError) throw invoiceError\n  const invoice = rowToInvoice(invoiceData as InvoiceRow)\n\n  // 6. Stamp all current-period rows with the new invoice_id\n  const entryIds = entries.map((e) => e.id)\n  const subIds = subs.map((s) => s.id)\n  const payableIds = payables.map((p) => p.id)\n\n  if (entryIds.length > 0) {\n    const { error } = await supabase\n      .from(\"time_entries\")\n      .update({ invoice_id: invoice.id })\n      .in(\"id\", entryIds)\n    if (error) throw error\n  }\n\n  if (subIds.length > 0) {\n    const { error } = await supabase\n      .from(\"subscriptions\")\n      .update({ invoice_id: invoice.id })\n      .in(\"id\", subIds)\n    if (error) throw error\n  }\n\n  if (payableIds.length > 0) {\n    const { error } = await supabase\n      .from(\"payables\")\n      .update({ invoice_id: invoice.id })\n      .in(\"id\", payableIds)\n    if (error) throw error\n\n  }\n\n  // 8. Optionally copy subscriptions forward as new current-period entries\n  if (copySubscriptionsForward && subs.length > 0) {\n    const newSubRows = subs.map((s) => ({\n      client_id: clientId,\n      name: s.name,\n      category: s.category,\n      billing_cycle: s.billingCycle,\n      amount: s.amount,\n      renewal_date: s.renewalDate || null,\n      notes: s.notes,\n      attachments: s.attachments ?? [],\n      links: s.links ?? [],\n    }))\n    const { error } = await supabase.from(\"subscriptions\").insert(newSubRows)\n    if (error) throw error\n  }\n\n  // 9. Clear billing period dates on client after invoice creation\n  if (client?.billingPeriodStart || client?.billingPeriodEnd) {\n    const { error: clearError } = await supabase\n      .from(\"clients\")\n      .update({ billing_period_start: null, billing_period_end: null })\n      .eq(\"id\", clientId)\n    if (clearError) throw clearError\n  }\n\n  return invoice\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 617, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/lib/auth-context.tsx"],"sourcesContent":["import { createContext, useContext, useEffect, useMemo, useState } from \"react\"\nimport type { SupabaseClient, User } from \"@supabase/supabase-js\"\nimport { createClient } from \"@/lib/supabase\"\n\ninterface AuthContextValue {\n  supabase: SupabaseClient\n  user: User | null\n  isAdmin: boolean\n  clientId: string | null\n  loading: boolean\n  signIn: (email: string, password: string) => Promise<{ error: string | null }>\n  signOut: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextValue | null>(null)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const supabase = useMemo(() => createClient(), [])\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setUser(session?.user ?? null)\n      setLoading(false)\n    })\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (_event, session) => {\n        setUser(session?.user ?? null)\n      },\n    )\n\n    return () => subscription.unsubscribe()\n  }, [supabase])\n\n  const role = user?.user_metadata?.role as string | undefined\n  const isAdmin = role === \"admin\"\n  const clientId = (user?.user_metadata?.clientId as string) ?? null\n\n  async function signIn(email: string, password: string) {\n    const { error } = await supabase.auth.signInWithPassword({ email, password })\n    if (error) return { error: error.message }\n    return { error: null }\n  }\n\n  async function signOut() {\n    await supabase.auth.signOut()\n  }\n\n  return (\n    <AuthContext.Provider value={{ supabase, user, isAdmin, clientId, loading, signIn, signOut }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const ctx = useContext(AuthContext)\n  if (!ctx) throw new Error(\"useAuth must be used within an AuthProvider\")\n  return ctx\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AAEA;;;;AAYA,MAAM,4BAAc,IAAA,sNAAa,EAA0B;AAEpD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,IAAA,sIAAY,KAAI,EAAE;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,SAAS,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;YACpD,QAAQ,SAAS,QAAQ;YACzB,WAAW;QACb;QAEA,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAChE,CAAC,QAAQ;YACP,QAAQ,SAAS,QAAQ;QAC3B;QAGF,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG;QAAC;KAAS;IAEb,MAAM,OAAO,MAAM,eAAe;IAClC,MAAM,UAAU,SAAS;IACzB,MAAM,WAAW,AAAC,MAAM,eAAe,YAAuB;IAE9D,eAAe,OAAO,KAAa,EAAE,QAAgB;QACnD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;YAAE;YAAO;QAAS;QAC3E,IAAI,OAAO,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;QACzC,OAAO;YAAE,OAAO;QAAK;IACvB;IAEA,eAAe;QACb,MAAM,SAAS,IAAI,CAAC,OAAO;IAC7B;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAU;YAAM;YAAS;YAAU;YAAS;YAAQ;QAAQ;kBACxF;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,MAAM,IAAA,mNAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT"}},
    {"offset": {"line": 690, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/lib/print.ts"],"sourcesContent":["export function handlePrint() {\n  const html = document.documentElement;\n  const wasDark = html.classList.contains(\"dark\");\n\n  if (wasDark) {\n    html.classList.remove(\"dark\");\n  }\n\n  // Let the browser repaint with light mode before opening the print dialog\n  requestAnimationFrame(() => {\n    window.print();\n\n    if (wasDark) {\n      html.classList.add(\"dark\");\n    }\n  });\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS;IACd,MAAM,OAAO,SAAS,eAAe;IACrC,MAAM,UAAU,KAAK,SAAS,CAAC,QAAQ,CAAC;IAExC,IAAI,SAAS;QACX,KAAK,SAAS,CAAC,MAAM,CAAC;IACxB;IAEA,0EAA0E;IAC1E,sBAAsB;QACpB,OAAO,KAAK;QAEZ,IAAI,SAAS;YACX,KAAK,SAAS,CAAC,GAAG,CAAC;QACrB;IACF;AACF"}},
    {"offset": {"line": 712, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/dashboard-header.tsx"],"sourcesContent":["import { useLocation, Link } from \"react-router-dom\"\nimport { Button } from \"@/components/ui/button\"\nimport { Archive, BarChart3, Home, LogOut, Printer } from \"lucide-react\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { handlePrint } from \"@/lib/print\"\n\nexport function DashboardHeader({ clientName = \"Cygnet Institute\" }: { clientName?: string }) {\n  const { pathname } = useLocation()\n  const { signOut, isAdmin, clientId } = useAuth()\n\n  const isReports = pathname === \"/reports\"\n  const isArchives = pathname === \"/archives\"\n\n  const title = (\n    <div className=\"flex flex-col gap-0.5\">\n      <h1 className=\"text-xl font-semibold tracking-tight text-foreground sm:text-2xl\">\n        {clientName}\n      </h1>\n      <p className=\"text-sm text-muted-foreground\">\n        Project Dashboard\n      </p>\n    </div>\n  )\n\n  return (\n    <header className=\"border-b border-border bg-card print:hidden\">\n      <div className=\"mx-auto flex max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center gap-4\">\n          {isAdmin ? (\n            <Link to=\"/\" className=\"hover:opacity-80 transition-opacity\">\n              {title}\n            </Link>\n          ) : (\n            title\n          )}\n        </div>\n        <div className=\"flex items-center gap-3\">\n          {isAdmin && (\n            <nav className=\"flex items-center gap-1\">\n              {isReports ? (\n                <Link to=\"/\">\n                  <Button variant=\"ghost\" size=\"sm\" className=\"gap-1.5 text-muted-foreground\">\n                    <Home className=\"h-4 w-4\" />\n                    <span className=\"hidden sm:inline\">Dashboard</span>\n                  </Button>\n                </Link>\n              ) : (\n                <Link to=\"/reports\">\n                  <Button variant=\"ghost\" size=\"sm\" className=\"gap-1.5 text-muted-foreground\">\n                    <BarChart3 className=\"h-4 w-4\" />\n                    <span className=\"hidden sm:inline\">Reports</span>\n                  </Button>\n                </Link>\n              )}\n              {!isArchives && (\n                <Link to=\"/archives\">\n                  <Button variant=\"ghost\" size=\"sm\" className=\"gap-1.5 text-muted-foreground\">\n                    <Archive className=\"h-4 w-4\" />\n                    <span className=\"hidden sm:inline\">Archives</span>\n                  </Button>\n                </Link>\n              )}\n            </nav>\n          )}\n          <span className=\"text-sm text-muted-foreground hidden sm:inline\">\n            {isAdmin ? \"Admin\" : clientName}\n          </span>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={handlePrint}\n            aria-label=\"Print\"\n          >\n            <Printer className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => signOut()}\n            aria-label=\"Sign out\"\n          >\n            <LogOut className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;AAEO,SAAS,gBAAgB,EAAE,aAAa,kBAAkB,EAA2B;IAC1F,MAAM,EAAE,QAAQ,EAAE,GAAG;IACrB,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAA,yIAAO;IAE9C,MAAM,YAAY,aAAa;IAC/B,MAAM,aAAa,aAAa;IAEhC,MAAM,sBACJ,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BACX;;;;;;0BAEH,8OAAC;gBAAE,WAAU;0BAAgC;;;;;;;;;;;;IAMjD,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACZ,wBACC,8OAAC;wBAAK,IAAG;wBAAI,WAAU;kCACpB;;;;;+BAGH;;;;;;8BAGJ,8OAAC;oBAAI,WAAU;;wBACZ,yBACC,8OAAC;4BAAI,WAAU;;gCACZ,0BACC,8OAAC;oCAAK,IAAG;8CACP,cAAA,8OAAC,4IAAM;wCAAC,SAAQ;wCAAQ,MAAK;wCAAK,WAAU;;0DAC1C,8OAAC,2MAAI;gDAAC,WAAU;;;;;;0DAChB,8OAAC;gDAAK,WAAU;0DAAmB;;;;;;;;;;;;;;;;yDAIvC,8OAAC;oCAAK,IAAG;8CACP,cAAA,8OAAC,4IAAM;wCAAC,SAAQ;wCAAQ,MAAK;wCAAK,WAAU;;0DAC1C,8OAAC,+NAAS;gDAAC,WAAU;;;;;;0DACrB,8OAAC;gDAAK,WAAU;0DAAmB;;;;;;;;;;;;;;;;;gCAIxC,CAAC,4BACA,8OAAC;oCAAK,IAAG;8CACP,cAAA,8OAAC,4IAAM;wCAAC,SAAQ;wCAAQ,MAAK;wCAAK,WAAU;;0DAC1C,8OAAC,mNAAO;gDAAC,WAAU;;;;;;0DACnB,8OAAC;gDAAK,WAAU;0DAAmB;;;;;;;;;;;;;;;;;;;;;;;sCAM7C,8OAAC;4BAAK,WAAU;sCACb,UAAU,UAAU;;;;;;sCAEvB,8OAAC,4IAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS,kIAAW;4BACpB,cAAW;sCAEX,cAAA,8OAAC,mNAAO;gCAAC,WAAU;;;;;;;;;;;sCAErB,8OAAC,4IAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,SAAS,IAAM;4BACf,cAAW;sCAEX,cAAA,8OAAC,oNAAM;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9B"}},
    {"offset": {"line": 961, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      'rounded-lg border bg-card text-card-foreground shadow-sm',\n      className,\n    )}\n    {...props}\n  />\n))\nCard.displayName = 'Card'\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex flex-col space-y-1.5 p-6', className)}\n    {...props}\n  />\n))\nCardHeader.displayName = 'CardHeader'\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      'text-base font-semibold leading-none tracking-tight',\n      className,\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = 'CardTitle'\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nCardDescription.displayName = 'CardDescription'\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n))\nCardContent.displayName = 'CardContent'\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex items-center p-6 pt-0', className)}\n    {...props}\n  />\n))\nCardFooter.displayName = 'CardFooter'\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,uDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 1046, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nInput.displayName = 'Input'\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 1074, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/label.tsx"],"sourcesContent":["\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst labelVariants = cva(\n  'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW"}},
    {"offset": {"line": 1104, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<'textarea'>\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = 'Textarea'\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1131, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/table.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn('w-full caption-bottom text-sm', className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = 'Table'\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn('[&_tr]:border-b', className)} {...props} />\n))\nTableHeader.displayName = 'TableHeader'\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn('[&_tr:last-child]:border-0', className)}\n    {...props}\n  />\n))\nTableBody.displayName = 'TableBody'\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      'border-t bg-muted/50 font-medium [&>tr]:last:border-b-0',\n      className,\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = 'TableFooter'\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      'border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted',\n      className,\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = 'TableRow'\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      'h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0',\n      className,\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = 'TableHead'\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn('p-4 align-middle [&:has([role=checkbox])]:pr-0', className)}\n    {...props}\n  />\n))\nTableCell.displayName = 'TableCell'\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn('mt-4 text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nTableCaption.displayName = 'TableCaption'\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,mNAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 1247, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/dialog.tsx"],"sourcesContent":["\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { X } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n      className,\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg',\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col space-y-1.5 text-center sm:text-left',\n      className,\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = 'DialogHeader'\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2',\n      className,\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = 'DialogFooter'\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      'text-lg font-semibold leading-none tracking-tight',\n      className,\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,iMAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 1386, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/select.tsx"],"sourcesContent":["\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { Check, ChevronDown, ChevronUp } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1',\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      'flex cursor-default items-center justify-center py-1',\n      className,\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      'flex cursor-default items-center justify-center py-1',\n      className,\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = 'popper', ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        'relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n        position === 'popper' &&\n          'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n        className,\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          'p-1',\n          position === 'popper' &&\n            'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]',\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn('py-1.5 pl-8 pr-2 text-sm font-semibold', className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      'relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn('-mx-1 my-1 h-px bg-muted', className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,mNAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6NAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,oLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,mOAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAChC,sLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,KAAK;YACL,WAAW,IAAA,yHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,yHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,+KAAyB;QACxB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG,+KAAyB,CAAC,WAAW"}},
    {"offset": {"line": 1585, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/lib/project-data.ts"],"sourcesContent":["// ===== Cygnet Institute SOW – All project data =====\n\nexport const projectOverview = {\n  title: \"Cygnet Institute Website & Mobile Application Modernization\",\n  client: \"Cygnet Institute\",\n  clientContact: \"ted@CygnetInstitute.org\",\n  consultant: \"David Melkonian\",\n  consultantEntity: \"Melkonian Industries LLC\",\n  siteUrl: \"https://cygnetinstitute.org\",\n  governingLaw: \"Michigan\",\n  hourlyRate: 70,\n  changeOrderRate: 70,\n  projectDuration: \"10–14 weeks\",\n  goals: [\n    \"Improve search visibility & Google Ads performance\",\n    \"Increase organizational awareness & credibility\",\n    \"Improve donation and fundraising outcomes\",\n    \"Boost program enrollment & engagement\",\n    \"Enhance mobile usability and reach\",\n  ],\n}\n\nexport interface PhaseDeliverable {\n  category: string\n  items: string[]\n}\n\nexport interface PaymentMilestone {\n  label: string\n  percentage: number\n  amount: number\n  trigger: string\n}\n\nexport interface ProjectPhase {\n  id: string\n  name: string\n  fixedCost: number\n  baseHours?: number\n  timeline: string\n  scope: PhaseDeliverable[]\n  deliverables: string[]\n  payments: PaymentMilestone[]\n}\n\nexport const phases: ProjectPhase[] = [\n  {\n    id: \"website\",\n    name: \"Phase 1 – Website Modernization\",\n    fixedCost: 8750,\n    baseHours: 125,\n    timeline: \"5–7 weeks\",\n    scope: [\n      {\n        category: \"Discovery & Strategy\",\n        items: [\n          \"Stakeholder discovery sessions\",\n          \"UX, SEO, performance, and donation funnel audit\",\n          \"Technical architecture planning\",\n          \"Final implementation roadmap\",\n        ],\n      },\n      {\n        category: \"UX & Visual Design\",\n        items: [\n          \"Homepage redesign\",\n          \"Donate page optimization\",\n          \"About/Mission page redesign\",\n          \"Program page templates\",\n          \"Event page templates\",\n          \"Mobile-first layouts\",\n          \"Accessibility-first design (WCAG 2.1 AA target)\",\n        ],\n      },\n      {\n        category: \"Front-End Development\",\n        items: [\n          \"Responsive UI implementation\",\n          \"Shared component library\",\n          \"Performance optimization\",\n          \"SEO-friendly architecture\",\n          \"Accessibility compliance improvements\",\n        ],\n      },\n      {\n        category: \"Donation & Fundraising System\",\n        items: [\n          \"Stripe integration\",\n          \"One-time & recurring donations\",\n          \"Conversion tracking\",\n          \"Secure backend handling\",\n        ],\n      },\n      {\n        category: \"Analytics & SEO Setup\",\n        items: [\n          \"Google Analytics 4\",\n          \"Google Tag Manager\",\n          \"Conversion tracking\",\n          \"SEO foundation setup\",\n          \"Google Ads readiness configuration\",\n        ],\n      },\n      {\n        category: \"QA, Testing & Launch\",\n        items: [\n          \"Cross-browser testing\",\n          \"Accessibility testing\",\n          \"Performance tuning\",\n          \"Production deployment\",\n        ],\n      },\n    ],\n    deliverables: [\n      \"Fully modernized public website\",\n      \"Donation-optimized fundraising flows\",\n      \"Analytics & conversion tracking\",\n      \"CMS-driven content system\",\n      \"Deployment documentation\",\n    ],\n    payments: [\n      { label: \"Project Start\", percentage: 40, amount: 3500, trigger: \"At project start\" },\n      { label: \"Design Approval\", percentage: 30, amount: 2625, trigger: \"At design approval\" },\n      { label: \"Deployment\", percentage: 30, amount: 2625, trigger: \"At production deployment\" },\n    ],\n  },\n  {\n    id: \"mobile\",\n    name: \"Phase 2 – Mobile Application Development\",\n    fixedCost: 9500,\n    timeline: \"8–10 weeks\",\n    scope: [\n      {\n        category: \"UX & UI Design\",\n        items: [\n          \"Mobile-first UX flows\",\n          \"iOS & Android layouts\",\n          \"Accessibility considerations\",\n          \"Donation experience optimization\",\n          \"Program & event browsing flows\",\n        ],\n      },\n      {\n        category: \"Application Development (Cross-Platform)\",\n        items: [\n          \"Expo (React Native + TypeScript)\",\n          \"Shared UI & logic with website\",\n          \"Native navigation\",\n          \"Performance optimization\",\n        ],\n      },\n      {\n        category: \"Core Features\",\n        items: [\n          \"Homepage & CMS-driven content\",\n          \"Program listings\",\n          \"Event listings\",\n          \"Secure donation flow (Stripe)\",\n          \"Contact & inquiry forms\",\n          \"Push notification framework (foundation)\",\n        ],\n      },\n      {\n        category: \"Backend Integration\",\n        items: [\n          \"Supabase database integration\",\n          \"Secure API access\",\n          \"Data schema design\",\n          \"Stripe server-side payment handling\",\n        ],\n      },\n      {\n        category: \"Analytics & Tracking\",\n        items: [\n          \"Engagement tracking\",\n          \"Donation funnel analytics\",\n          \"Event tracking\",\n        ],\n      },\n      {\n        category: \"QA, Testing & Deployment\",\n        items: [\n          \"iOS & Android testing\",\n          \"Expo EAS build pipelines\",\n          \"App Store & Play Store submission support\",\n          \"Production release packaging\",\n        ],\n      },\n    ],\n    deliverables: [\n      \"Production-ready iOS application\",\n      \"Production-ready Android application\",\n      \"Unified codebase shared with website\",\n      \"Deployment documentation\",\n      \"Admin instructions\",\n    ],\n    payments: [\n      { label: \"Project Start\", percentage: 40, amount: 3800, trigger: \"At project start\" },\n      { label: \"Design Approval\", percentage: 30, amount: 2850, trigger: \"At design approval\" },\n      { label: \"Store Submission\", percentage: 30, amount: 2850, trigger: \"At App Store & Play Store submission\" },\n    ],\n  },\n]\n\nexport const socialMediaCampaign = {\n  totalAnnual: 9700,\n  effectiveMonthly: 808,\n  phases: [\n    {\n      name: \"Strategy & Setup (One-Time)\",\n      cost: 1450,\n      scope: [\n        \"Audience research\",\n        \"Platform strategy\",\n        \"Messaging framework\",\n        \"Brand voice & style guide\",\n        \"90-day content calendar\",\n        \"KPI definitions\",\n      ],\n    },\n    {\n      name: \"Monthly Campaign Execution\",\n      cost: 640,\n      annualCost: 7680,\n      scope: [\n        \"8–12 posts per month\",\n        \"Facebook, Instagram, LinkedIn\",\n        \"Engagement monitoring & responses\",\n        \"Monthly analytics reporting\",\n        \"Quarterly strategy tuning\",\n      ],\n    },\n    {\n      name: \"Fundraising Campaign Bursts (Quarterly)\",\n      cost: 570,\n      scope: [\n        \"Campaign creative\",\n        \"Messaging strategy\",\n        \"Funnel optimization\",\n      ],\n    },\n  ],\n  platforms: {\n    primary: [\"Facebook\", \"Instagram\", \"LinkedIn\"],\n    secondary: [\"YouTube Shorts\", \"TikTok (short-form video, Phase 2)\"],\n  },\n  kpis: [\n    { objective: \"Awareness\", metric: \"Reach, impressions, follower growth\" },\n    { objective: \"Engagement\", metric: \"Likes, shares, comments, saves\" },\n    { objective: \"Fundraising\", metric: \"Donation clicks, conversions\" },\n    { objective: \"Programs\", metric: \"Form submissions, signups\" },\n  ],\n  expectedROI: [\n    { metric: \"Website traffic\", goal: \"+30–60%\" },\n    { metric: \"Engagement\", goal: \"+80–150%\" },\n    { metric: \"Donation conversions\", goal: \"+20–40%\" },\n    { metric: \"Program signups\", goal: \"+25–50%\" },\n  ],\n}\n\nexport const maintenance = {\n  monthlyFee: 120,\n  annualFee: 1440,\n  includes: [\n    \"Security updates & patching\",\n    \"CMS updates\",\n    \"Backup monitoring\",\n    \"Uptime monitoring\",\n    \"Emergency technical fixes\",\n    \"Minor content updates\",\n    \"Light SEO & analytics checks\",\n    \"Mobile application monitoring\",\n  ],\n}\n\nexport const thirdPartyCosts = {\n  monthlyRange: { low: 125, high: 250 },\n  annualRange: { low: 1500, high: 3000 },\n  categories: [\n    \"Hosting & Infrastructure\",\n    \"CMS (Sanity)\",\n    \"Supabase\",\n    \"Stripe\",\n    \"Analytics & Monitoring\",\n    \"Security monitoring\",\n  ],\n}\n\nexport const investmentSummary = [\n  { component: \"Website Development\", cost: \"$8,750\", type: \"one-time\" },\n  { component: \"Mobile App Development\", cost: \"$9,500\", type: \"one-time\" },\n  { component: \"Total One-Time Cost\", cost: \"$18,250\", type: \"one-time\" },\n  { component: \"Maintenance (Annual)\", cost: \"$1,440\", type: \"recurring\" },\n  { component: \"Software Subscriptions (Annual)\", cost: \"$1,500 – $3,000\", type: \"recurring\" },\n  { component: \"Social Media Campaign (Annual)\", cost: \"$9,700\", type: \"recurring\" },\n]\n\nexport const timelinePhases = [\n  { phase: \"Website Phase\", duration: \"5–7 weeks\" },\n  { phase: \"Mobile App Phase\", duration: \"8–10 weeks\" },\n  { phase: \"Total Program\", duration: \"13–17 weeks\" },\n]\n\nexport interface EnvVarGroup {\n  category: string\n  vars: { name: string; location: string; note?: string }[]\n}\n\nexport const envVarGroups: EnvVarGroup[] = [\n  {\n    category: \"Sanity CMS\",\n    vars: [\n      { name: \"SANITY_PROJECT_ID / EXPO_PUBLIC_SANITY_PROJECT_ID\", location: \"Sanity Dashboard > Project > Settings\" },\n      { name: \"SANITY_DATASET\", location: \"Sanity Dashboard > Project > Datasets tab\" },\n      { name: \"SANITY_API_VERSION\", location: \"YYYY-MM-DD format (e.g., 2024-01-01)\" },\n      { name: \"SANITY_API_TOKEN\", location: \"Sanity Dashboard > Project > API > Tokens\", note: \"Read permissions\" },\n    ],\n  },\n  {\n    category: \"Supabase\",\n    vars: [\n      { name: \"SUPABASE_URL / EXPO_PUBLIC_SUPABASE_URL\", location: \"Supabase Dashboard > Settings > API > Project URL\" },\n      { name: \"SUPABASE_ANON_KEY / EXPO_PUBLIC_SUPABASE_ANON_KEY\", location: \"Supabase Dashboard > Settings > API > anon public\" },\n      { name: \"SUPABASE_SERVICE_ROLE_KEY\", location: \"Supabase Dashboard > Settings > API > service_role secret\", note: \"Keep secret - server-side only\" },\n    ],\n  },\n  {\n    category: \"Stripe\",\n    vars: [\n      { name: \"STRIPE_PUBLISHABLE_KEY / EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY\", location: \"Stripe Dashboard > Developers > API Keys\" },\n      { name: \"STRIPE_SECRET_KEY\", location: \"Stripe Dashboard > Developers > API Keys\", note: \"Keep secret - server-side only\" },\n      { name: \"STRIPE_WEBHOOK_SECRET\", location: \"Stripe Dashboard > Developers > Webhooks > Signing Secret\" },\n    ],\n  },\n  {\n    category: \"Web Analytics\",\n    vars: [\n      { name: \"NEXT_PUBLIC_GA_MEASUREMENT_ID\", location: \"Google Analytics > Admin > Data Streams (G-XXXXXXXXXX)\" },\n      { name: \"NEXT_PUBLIC_GTM_ID\", location: \"Google Tag Manager > Container Settings (GTM-XXXXXXX)\" },\n    ],\n  },\n  {\n    category: \"Mobile Analytics\",\n    vars: [\n      { name: \"EXPO_PUBLIC_POSTHOG_API_KEY\", location: \"PostHog > Project Settings > Project API Key\" },\n      { name: \"EXPO_PUBLIC_POSTHOG_HOST\", location: \"https://app.posthog.com or self-hosted URL\" },\n    ],\n  },\n  {\n    category: \"App Config\",\n    vars: [\n      { name: \"NEXT_PUBLIC_SITE_URL / EXPO_PUBLIC_SITE_URL\", location: \"Production domain (e.g., https://cygnetinstitute.org)\" },\n    ],\n  },\n  {\n    category: \"Deployment\",\n    vars: [\n      { name: \"VERCEL_URL\", location: \"Auto-populated by Vercel deployment\" },\n      { name: \"EAS_PROJECT_ID\", location: \"Expo Dashboard > Project > Project ID (in eas.json)\" },\n    ],\n  },\n]\n\nexport const clientResponses = {\n  submissionDate: \"1/26/26, 1:38 PM EST\",\n  respondentEmail: \"ted@CygnetInstitute.org\",\n  answers: [\n    {\n      question: \"Main goal of this work?\",\n      selected: [\n        \"Primarily improve search visibility and Google Ads performance\",\n        \"Increase awareness and credibility of the organization\",\n        \"Increase donations and fundraising effectiveness\",\n        \"Improve usability and experience for visitors\",\n        \"Support program enrollment or engagement\",\n      ],\n    },\n    { question: \"Do you want a new design?\", selected: [\"No – current design is fine\"] },\n    { question: \"Do you need new functionality?\", selected: [\"Yes – event registration and management\"] },\n    { question: \"Google Nonprofit Ads Program?\", selected: [\"Yes – approved but not yet active\"] },\n    { question: \"Satisfied with current hosting?\", selected: [\"We would like recommendations\"] },\n    { question: \"Administrative control level?\", selected: [\"Minimal control – we prefer you maintain the site\"] },\n    { question: \"Interest in AI features?\", selected: [\"Yes – AI chatbot for visitors\"] },\n    { question: \"Need a mobile app?\", selected: [\"Yes – full mobile app\"] },\n    { question: \"Currently use analytics?\", selected: [\"No – no meaningful analytics\"] },\n    { question: \"Materials for board funding?\", selected: [\"Combination of the above\"] },\n    { question: \"Sensitive data transmitted?\", selected: [\"Yes – personal but non-medical data\"] },\n    { question: \"Security certifications required?\", selected: [\"None currently required\"] },\n    { question: \"E-commerce / payment solution?\", selected: [\"Yes – donations\"] },\n  ],\n}\n\n// ===== Clients =====\nexport interface Client {\n  id: string\n  name: string\n  hourlyRate: number | null\n  flatRate: number | null\n  billingPeriodStart: string | null\n  billingPeriodEnd: string | null\n}\n\nexport const defaultClients: Client[] = [\n  { id: \"cygnet\", name: \"Cygnet Institute\", hourlyRate: 62, flatRate: null, billingPeriodStart: null, billingPeriodEnd: null },\n  { id: \"mindflip\", name: \"Mind Flip\", hourlyRate: 50, flatRate: null, billingPeriodStart: null, billingPeriodEnd: null },\n]\n\n// ===== Payables =====\nexport interface Payable {\n  id: string\n  description: string\n  amount: number\n  date: string\n  paid: boolean\n  paidDate: string\n  notes: string\n  attachments: Attachment[]\n  links: Link[]\n}\n\n// ===== Invoices =====\nexport interface Invoice {\n  id: string\n  clientId: string\n  invoiceNumber: string\n  periodStart: string\n  periodEnd: string\n  totalTime: number\n  totalSubscriptions: number\n  totalPayables: number\n  grandTotal: number\n  notes: string\n  createdAt: string\n}\n\n// ===== Software Subscriptions =====\nexport interface Subscription {\n  id: string\n  name: string\n  category: string\n  billingCycle: \"monthly\" | \"annual\"\n  amount: number\n  renewalDate: string\n  notes: string\n  attachments: Attachment[]\n  links: Link[]\n}\n\nexport const defaultSubscriptions: Subscription[] = [\n  {\n    id: \"1\",\n    name: \"Vercel Pro\",\n    category: \"Hosting & Infrastructure\",\n    billingCycle: \"monthly\",\n    amount: 20,\n    renewalDate: \"2025-03-01\",\n    notes: \"Next.js hosting and deployment\",\n    attachments: [],\n    links: [],\n  },\n  {\n    id: \"2\",\n    name: \"Sanity CMS\",\n    category: \"CMS (Sanity)\",\n    billingCycle: \"monthly\",\n    amount: 15,\n    renewalDate: \"2025-03-01\",\n    notes: \"Content management system\",\n    attachments: [],\n    links: [],\n  },\n  {\n    id: \"3\",\n    name: \"Supabase Pro\",\n    category: \"Supabase\",\n    billingCycle: \"monthly\",\n    amount: 25,\n    renewalDate: \"2025-03-01\",\n    notes: \"Database and auth backend\",\n    attachments: [],\n    links: [],\n  },\n  {\n    id: \"4\",\n    name: \"Stripe\",\n    category: \"Stripe\",\n    billingCycle: \"monthly\",\n    amount: 0,\n    renewalDate: \"\",\n    notes: \"Pay-per-transaction, no fixed subscription\",\n    attachments: [],\n    links: [],\n  },\n  {\n    id: \"5\",\n    name: \"PostHog\",\n    category: \"Analytics & Monitoring\",\n    billingCycle: \"monthly\",\n    amount: 0,\n    renewalDate: \"\",\n    notes: \"Free tier for analytics\",\n    attachments: [],\n    links: [],\n  },\n  {\n    id: \"6\",\n    name: \"Yoast SEO\",\n    category: \"SEO\",\n    billingCycle: \"annual\",\n    amount: 118.80,\n    renewalDate: \"2026-02-06\",\n    notes: \"SEO plugin for WordPress\",\n    attachments: [],\n    links: [],\n  },\n]\n\nexport const subscriptionCategories = [\n  \"Hosting & Infrastructure\",\n  \"CMS (Sanity)\",\n  \"Supabase\",\n  \"Stripe\",\n  \"Analytics & Monitoring\",\n  \"SEO\",\n]\n\n// ===== Links =====\nexport interface Link {\n  url: string\n  label: string\n}\n\n// ===== Attachments =====\nexport interface Attachment {\n  name: string\n  path: string\n  size: number\n  uploadedAt: string\n}\n\n// ===== Time Tracking =====\nexport interface TimeEntry {\n  id: string\n  date: string\n  startTime: string\n  endTime: string\n  timeRange: string\n  totalHours: number\n  tasks: string\n  notes: string\n  attachments: Attachment[]\n  links: Link[]\n}\n\nexport const defaultTimeEntries: TimeEntry[] = [\n  {\n    id: \"1\",\n    date: \"2025-02-06\",\n    startTime: \"15:30\",\n    endTime: \"21:25\",\n    timeRange: \"3:30 PM - 9:25 PM\",\n    totalHours: 4.67,\n    tasks: \"Activated the Yoast SEO plugin. Ran SEO scans on pages. Made text and image updates based on SEO scan findings.\",\n    notes: \"Yoast SEO plugin activated\",\n    attachments: [],\n    links: [],\n  },\n  {\n    id: \"2\",\n    date: \"2025-02-08\",\n    startTime: \"12:45\",\n    endTime: \"13:25\",\n    timeRange: \"12:45 PM - 1:25 PM\",\n    totalHours: 0.67,\n    tasks: \"Took baseline screenshots of SEO numbers and enabled further Yoast SEO features.\",\n    notes: \"\",\n    attachments: [],\n    links: [],\n  },\n]\n\nexport const timeTrackingMeta = {\n  payableTo: \"Melkonian Industries LLC\",\n  rate: 62,\n  reportingPeriod: \"Feb 1 - Feb 27\",\n}\n\n"],"names":[],"mappings":"AAAA,sDAAsD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE/C,MAAM,kBAAkB;IAC7B,OAAO;IACP,QAAQ;IACR,eAAe;IACf,YAAY;IACZ,kBAAkB;IAClB,SAAS;IACT,cAAc;IACd,YAAY;IACZ,iBAAiB;IACjB,iBAAiB;IACjB,OAAO;QACL;QACA;QACA;QACA;QACA;KACD;AACH;AAyBO,MAAM,SAAyB;IACpC;QACE,IAAI;QACJ,MAAM;QACN,WAAW;QACX,WAAW;QACX,UAAU;QACV,OAAO;YACL;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;iBACD;YACH;YACA;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;iBACD;YACH;YACA;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;oBACA;iBACD;YACH;YACA;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;iBACD;YACH;YACA;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;oBACA;iBACD;YACH;YACA;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;iBACD;YACH;SACD;QACD,cAAc;YACZ;YACA;YACA;YACA;YACA;SACD;QACD,UAAU;YACR;gBAAE,OAAO;gBAAiB,YAAY;gBAAI,QAAQ;gBAAM,SAAS;YAAmB;YACpF;gBAAE,OAAO;gBAAmB,YAAY;gBAAI,QAAQ;gBAAM,SAAS;YAAqB;YACxF;gBAAE,OAAO;gBAAc,YAAY;gBAAI,QAAQ;gBAAM,SAAS;YAA2B;SAC1F;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,WAAW;QACX,UAAU;QACV,OAAO;YACL;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;oBACA;iBACD;YACH;YACA;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;iBACD;YACH;YACA;gBACE,UAAU;gBACV,OAAO;oBACL;oBACA;oBACA;oBACA;oBACA;oBACA;iBACD;YACH;YACA;g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"}},
    {"offset": {"line": 2312, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/time-tracking-section.tsx"],"sourcesContent":[";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableFooter,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  type TimeEntry,\n  type Attachment,\n  type Link,\n  timeTrackingMeta,\n} from \"@/lib/project-data\";\nimport {\n  fetchTimeEntries,\n  upsertTimeEntry,\n  deleteTimeEntry as deleteTimeEntryApi,\n  uploadAttachment,\n  getAttachmentUrl,\n  deleteAttachment,\n  deleteAllAttachments,\n} from \"@/lib/supabase\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { Plus, Pencil, Trash2, Paperclip, X, Download, ExternalLink } from \"lucide-react\";\n\n\n\nfunction formatCurrency(n: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2,\n  }).format(n);\n}\n\n/** Generate time options in 15-min increments from 6:00 AM to 11:45 PM */\nfunction generateTimeOptions() {\n  const options: { value: string; label: string }[] = [];\n  for (let h = 6; h <= 23; h++) {\n    for (let m = 0; m < 60; m += 15) {\n      const hour24 = String(h).padStart(2, \"0\");\n      const min = String(m).padStart(2, \"0\");\n      const value = `${hour24}:${min}`;\n\n      const period = h >= 12 ? \"PM\" : \"AM\";\n      const hour12 = h === 0 ? 12 : h > 12 ? h - 12 : h;\n      const label = `${hour12}:${min} ${period}`;\n      options.push({ value, label });\n    }\n  }\n  return options;\n}\n\n/** Convert 24h time string \"HH:MM\" to a readable 12h label */\nexport function formatTime12(time24: string): string {\n  const [hStr, mStr] = time24.split(\":\");\n  const h = parseInt(hStr, 10);\n  const period = h >= 12 ? \"PM\" : \"AM\";\n  const hour12 = h === 0 ? 12 : h > 12 ? h - 12 : h;\n  return `${hour12}:${mStr} ${period}`;\n}\n\n/** Calculate hours between two 24h time strings (supports cross-midnight) */\nexport function calcHours(start: string, end: string): number {\n  if (!start || !end) return 0;\n  const [sh, sm] = start.split(\":\").map(Number);\n  const [eh, em] = end.split(\":\").map(Number);\n  const startMin = sh * 60 + sm;\n  let endMin = eh * 60 + em;\n  if (endMin <= startMin) endMin += 24 * 60; // cross-midnight\n  return Math.round(((endMin - startMin) / 60) * 100) / 100;\n}\n\ninterface EntryForm {\n  date: string;\n  startTime: string;\n  endTime: string;\n  tasks: string;\n  notes: string;\n  links: Link[];\n}\n\nconst emptyForm: EntryForm = {\n  date: \"\",\n  startTime: \"\",\n  endTime: \"\",\n  tasks: \"\",\n  notes: \"\",\n  links: [],\n};\n\nexport function TimeTrackingSection({\n  editMode = false,\n  clientId = \"cygnet\",\n  hourlyRate = null,\n  flatRate = null,\n  refreshKey = 0,\n  billingPeriodEnd = null,\n  onRateChange,\n}: {\n  editMode?: boolean;\n  clientId?: string;\n  hourlyRate?: number | null;\n  flatRate?: number | null;\n  refreshKey?: number;\n  billingPeriodEnd?: string | null;\n  onRateChange?: (hourlyRate: number | null, flatRate: number | null) => void;\n}) {\n  const { supabase } = useAuth();\n  const HOURLY_RATE = hourlyRate;\n  const FLAT_RATE = flatRate;\n  const [rateDialogOpen, setRateDialogOpen] = useState(false);\n  const [editHourlyRate, setEditHourlyRate] = useState(\"\");\n  const [editFlatRate, setEditFlatRate] = useState(\"\");\n  const [entries, setEntries] = useState<TimeEntry[]>([]);\n  const [mounted, setMounted] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingEntry, setEditingEntry] = useState<TimeEntry | null>(null);\n  const [form, setForm] = useState<EntryForm>(emptyForm);\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);\n  const [pendingFiles, setPendingFiles] = useState<File[]>([]);\n  const [existingAttachments, setExistingAttachments] = useState<Attachment[]>(\n    [],\n  );\n  const [attachmentsToDelete, setAttachmentsToDelete] = useState<Attachment[]>(\n    [],\n  );\n  const [uploading, setUploading] = useState(false);\n  const [viewAttachmentsEntry, setViewAttachmentsEntry] =\n    useState<TimeEntry | null>(null);\n  const [viewLinksEntry, setViewLinksEntry] = useState<TimeEntry | null>(null);\n\n  const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB\n\n  const reportingPeriod = useMemo(() => {\n    const dates = entries.map((e) => e.date).filter(Boolean).sort();\n    if (dates.length === 0) return null;\n    const fmt = (d: Date) =>\n      `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`;\n    const startLabel = fmt(new Date(dates[0] + \"T00:00:00\"));\n    if (!billingPeriodEnd) return `${startLabel} - Present`;\n    return `${startLabel} - ${fmt(new Date(billingPeriodEnd + \"T00:00:00\"))}`;\n  }, [entries, billingPeriodEnd]);\n\n  const timeOptions = useMemo(() => generateTimeOptions(), []);\n\n  // Fetch entries from Supabase on mount / client change\n  useEffect(() => {\n    let cancelled = false;\n    setMounted(false);\n    setError(null);\n\n    async function load() {\n      try {\n        const rows = await fetchTimeEntries(supabase, clientId);\n        if (cancelled) return;\n\n        setEntries(rows);\n      } catch (err: unknown) {\n        if (!cancelled) {\n          const message =\n            err instanceof Error\n              ? err.message\n              : typeof err === \"object\" && err !== null && \"message\" in err\n                ? String((err as { message: unknown }).message)\n                : \"Failed to load time entries\";\n          setError(message);\n        }\n      } finally {\n        if (!cancelled) setMounted(true);\n      }\n    }\n\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [clientId, supabase, refreshKey]);\n\n  const totalHours = entries.reduce((sum, e) => sum + e.totalHours, 0);\n  const totalCost = entries.length === 0\n    ? null\n    : FLAT_RATE != null\n      ? FLAT_RATE\n      : HOURLY_RATE != null\n        ? totalHours * HOURLY_RATE\n        : null;\n\n  const calculatedHours = calcHours(form.startTime, form.endTime);\n\n  function openAdd() {\n    setEditingEntry(null);\n    setForm(emptyForm);\n    setPendingFiles([]);\n    setExistingAttachments([]);\n    setAttachmentsToDelete([]);\n    setDialogOpen(true);\n  }\n\n  function openEdit(entry: TimeEntry) {\n    setEditingEntry(entry);\n    setForm({\n      date: entry.date,\n      startTime: entry.startTime || \"\",\n      endTime: entry.endTime || \"\",\n      tasks: entry.tasks,\n      notes: entry.notes,\n      links: entry.links ?? [],\n    });\n    setPendingFiles([]);\n    setExistingAttachments(entry.attachments ?? []);\n    setAttachmentsToDelete([]);\n    setDialogOpen(true);\n  }\n\n  async function handleSave() {\n    if (!form.date || !form.startTime) return;\n    if (form.endTime && calculatedHours <= 0) return;\n\n    const timeRange = form.endTime\n      ? `${formatTime12(form.startTime)} - ${formatTime12(form.endTime)}`\n      : `${formatTime12(form.startTime)} - In Progress`;\n\n    const entryId = editingEntry?.id ?? crypto.randomUUID();\n\n    try {\n      setUploading(true);\n\n      // Delete attachments marked for removal\n      for (const att of attachmentsToDelete) {\n        await deleteAttachment(supabase, att.path);\n      }\n\n      // Upload new files\n      const newAttachments: Attachment[] = [];\n      for (const file of pendingFiles) {\n        const att = await uploadAttachment(supabase, file, clientId, entryId);\n        newAttachments.push(att);\n      }\n\n      // Compute final attachments list\n      const remainingExisting = existingAttachments.filter(\n        (a) => !attachmentsToDelete.some((d) => d.path === a.path),\n      );\n      const finalAttachments = [...remainingExisting, ...newAttachments];\n\n      const entryData: Omit<TimeEntry, \"id\"> = {\n        date: form.date,\n        startTime: form.startTime,\n        endTime: form.endTime,\n        timeRange,\n        totalHours: form.endTime ? calculatedHours : 0,\n        tasks: form.tasks,\n        notes: form.notes,\n        attachments: finalAttachments,\n        links: form.links.filter((l) => l.url.trim()),\n      };\n\n      if (editingEntry) {\n        const updated = { ...editingEntry, ...entryData };\n        setEntries((prev) =>\n          prev.map((e) => (e.id === editingEntry.id ? updated : e)),\n        );\n        await upsertTimeEntry(supabase, updated, clientId);\n      } else {\n        const newEntry: TimeEntry = { id: entryId, ...entryData };\n        setEntries((prev) => [...prev, newEntry]);\n        await upsertTimeEntry(supabase, newEntry, clientId);\n      }\n      setDialogOpen(false);\n    } catch (err) {\n      setError(\n        err instanceof Error ? err.message : \"Failed to save time entry\",\n      );\n      try {\n        const rows = await fetchTimeEntries(supabase, clientId);\n        setEntries(rows);\n      } catch {\n        /* keep error visible */\n      }\n    } finally {\n      setUploading(false);\n    }\n  }\n\n  async function handleDelete(id: string) {\n    const prev = entries;\n    const entryToDelete = entries.find((e) => e.id === id);\n    setEntries(entries.filter((e) => e.id !== id));\n    setDeleteConfirm(null);\n\n    try {\n      // Clean up storage files\n      if (entryToDelete?.attachments?.length) {\n        await deleteAllAttachments(supabase, entryToDelete.attachments);\n      }\n      await deleteTimeEntryApi(supabase, id);\n    } catch (err) {\n      setError(\n        err instanceof Error ? err.message : \"Failed to delete time entry\",\n      );\n      setEntries(prev);\n    }\n  }\n\n  if (!mounted) {\n    return (\n      <Card>\n        <CardContent className=\"p-8 text-center text-muted-foreground\">\n          Loading time entries...\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-6\">\n      {error && (\n        <Card className=\"border-destructive\">\n          <CardContent className=\"p-4text-destructive\">\n            {error}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"ml-2\"\n              onClick={() => setError(null)}\n            >\n              Dismiss\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Meta info – only shown when entries exist */}\n      {entries.length > 0 && (\n      <Card>\n        <CardHeader>\n          {/* Print-only: two-column layout */}\n          <div className=\"invoice-print hidden print:flex justify-between items-start\">\n            <div className=\"flex flex-col gap-0.5\">\n              <CardTitle>Invoice Details</CardTitle>\n              {reportingPeriod && <span className=\"text-muted-foreground\">{reportingPeriod}</span>}\n            </div>\n            <div className=\"flex flex-col gap-1 items-end text-right\">\n              <div>\n                <span className=\"text-muted-foreground\">Payable To: </span>\n                <span className=\"font-medium\">{timeTrackingMeta.payableTo}</span>\n              </div>\n              <div className=\"text-muted-foreground\">2680 Diane Marie Ct, Waterford, MI 48329</div>\n              <div>\n                <span className=\"text-muted-foreground\">Venmo: </span>\n                <span className=\"font-medium\">@MelkonianLLC</span>\n              </div>\n              <div>\n                <span className=\"text-muted-foreground\">{FLAT_RATE != null ? \"Flat Rate: \" : \"Hourly Rate: \"}</span>\n                <span className=\"font-medium\">{FLAT_RATE != null ? formatCurrency(FLAT_RATE) : HOURLY_RATE != null ? formatCurrency(HOURLY_RATE) : \"TBD\"}</span>\n              </div>\n            </div>\n          </div>\n          {/* Screen: grid layout */}\n          <div className=\"invoice-screen grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n            <div className=\"flex flex-col gap-0.5\">\n              <CardTitle>Invoice Details</CardTitle>\n              {reportingPeriod && <span className=\"text-sm text-muted-foreground\">{reportingPeriod}</span>}\n            </div>\n            <div className=\"flex flex-col gap-0.5 items-start\">\n              <span className=\"text-muted-foreground\">Payable To</span>\n              <span className=\"font-medium\">{timeTrackingMeta.payableTo}</span>\n              <span className=\"text-muted-foreground\">\n                2680 Diane Marie Ct\n                <br />\n                Waterford, MI 48329\n              </span>\n            </div>\n            <div className=\"flex flex-col gap-0.5 items-start\">\n              <span className=\"text-muted-foreground\">Venmo</span>\n              <span className=\"font-medium\">@MelkonianLLC</span>\n            </div>\n            <div className=\"flex flex-col gap-0.5 items-start\">\n              <span className=\"text-muted-foreground\">{FLAT_RATE != null ? \"Flat Rate\" : \"Hourly Rate\"}</span>\n              <div className=\"flex items-center gap-1\">\n                <span className=\"font-medium\">{FLAT_RATE != null ? formatCurrency(FLAT_RATE) : HOURLY_RATE != null ? formatCurrency(HOURLY_RATE) : \"TBD\"}</span>\n                {onRateChange && (\n                  <button\n                    className=\"text-muted-foreground hover:text-primary print:hidden\"\n                    onClick={() => {\n                      setEditHourlyRate(HOURLY_RATE != null ? String(HOURLY_RATE) : \"\");\n                      setEditFlatRate(FLAT_RATE != null ? String(FLAT_RATE) : \"\");\n                      setRateDialogOpen(true);\n                    }}\n                    aria-label=\"Edit rate\"\n                  >\n                    <Pencil className=\"h-3.5 w-3.5\" />\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n      </Card>\n      )}\n\n      {/* Entries table – hidden entirely when empty and not in edit mode */}\n      {(entries.length > 0 || editMode) && (\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between pb-4\">\n          <div>\n            <CardTitle>Time Tracking</CardTitle>\n          </div>\n          {editMode && (\n            <Button onClick={openAdd} size=\"sm\">\n              <Plus className=\"mr-1.5 h-4 w-4\" />\n              Add Entry\n            </Button>\n          )}\n        </CardHeader>\n        {entries.length > 0 && (\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-[110px]\">Date</TableHead>\n                <TableHead>Tasks</TableHead>\n                <TableHead className=\"w-[110px]\">Time Range</TableHead>\n                <TableHead className=\"w-[80px] text-right\">Hours</TableHead>\n                <TableHead className=\"w-[100px] text-right\">Cost</TableHead>\n                {editMode && (\n                  <TableHead className=\"w-[100px] text-right\">\n                    Actions\n                  </TableHead>\n                )}\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {entries.map((entry) => (\n                  <TableRow key={entry.id}>\n                    <TableCell className=\"whitespace-nowrap font-medium\">\n                      {(() => { const d = new Date(entry.date + \"T00:00:00\"); return `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`; })()}\n                    </TableCell>\n                    <TableCell className=\"max-w-[220px] text-muted-foreground\">\n                      {entry.tasks}\n                    </TableCell>\n                    <TableCell className=\"whitespace-nowrap\">\n                      {entry.timeRange}\n                    </TableCell>\n                    <TableCell className=\"text-right font-mono\">\n                      {entry.totalHours.toFixed(2)}\n                    </TableCell>\n                    <TableCell className=\"text-right font-monotext-muted-foreground\">\n                      <span className=\"inline-flex items-center gap-1.5\">\n                        {FLAT_RATE != null ? \"\\u2014\" : HOURLY_RATE != null ? formatCurrency(entry.totalHours * HOURLY_RATE) : \"TBD\"}\n                        {entry.attachments?.length > 0 && (\n                          <button\n                            type=\"button\"\n                            className=\"inline-flex text-muted-foreground hover:text-primary\"\n                            title={`${entry.attachments.length} receipt(s)`}\n                            onClick={() => setViewAttachmentsEntry(entry)}\n                          >\n                            <Paperclip className=\"h-3.5 w-3.5\" />\n                          </button>\n                        )}\n                        {entry.links?.length > 0 && (\n                          <button\n                            type=\"button\"\n                            className=\"inline-flex text-muted-foreground hover:text-primary\"\n                            title={`${entry.links.length} link(s)`}\n                            onClick={() => setViewLinksEntry(entry)}\n                          >\n                            <ExternalLink className=\"h-3.5 w-3.5\" />\n                          </button>\n                        )}\n                      </span>\n                    </TableCell>\n                    {editMode && (\n                      <TableCell className=\"text-right\">\n                        <div className=\"flex items-center justify-end gap-1\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"h-8 w-8\"\n                            onClick={() => openEdit(entry)}\n                            aria-label=\"Edit entry\"\n                          >\n                            <Pencil className=\"h-3.5 w-3.5\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"h-8 w-8 text-destructive hover:text-destructive\"\n                            onClick={() => setDeleteConfirm(entry.id)}\n                            aria-label=\"Delete entry\"\n                          >\n                            <Trash2 className=\"h-3.5 w-3.5\" />\n                          </Button>\n                        </div>\n                      </TableCell>\n                    )}\n                  </TableRow>\n                ))}\n            </TableBody>\n              <TableFooter>\n                <TableRow>\n                  <TableCell colSpan={3} className=\"font-semibold\">\n                    Total\n                  </TableCell>\n                  <TableCell className=\"text-right font-mono font-semibold\">\n                    {totalHours.toFixed(2)}\n                  </TableCell>\n                  <TableCell className=\"text-right font-mono font-semibold text-primary\">\n                    {totalCost != null ? formatCurrency(totalCost) : \"TBD\"}\n                  </TableCell>\n                  {editMode && <TableCell />}\n                </TableRow>\n              </TableFooter>\n          </Table>\n          </div>\n        </CardContent>\n        )}\n      </Card>\n      )}\n\n      {/* Add/Edit Dialog */}\n      <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingEntry ? \"Edit Time Entry\" : \"Add Time Entry\"}\n            </DialogTitle>\n            <DialogDescription>\n              {editingEntry\n                ? \"Update the details of this time entry.\"\n                : \"Select start and end times to automatically calculate hours.\"}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4\">\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"entry-date\">Date</Label>\n              <Input\n                id=\"entry-date\"\n                type=\"date\"\n                value={form.date}\n                onChange={(e) => setForm({ ...form, date: e.target.value })}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"flex flex-col gap-1.5\">\n                <Label>Start Time</Label>\n                <Select\n                  value={form.startTime}\n                  onValueChange={(val) => setForm({ ...form, startTime: val })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select start\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {timeOptions.map((opt) => (\n                      <SelectItem key={opt.value} value={opt.value}>\n                        {opt.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"flex flex-col gap-1.5\">\n                <Label>End Time</Label>\n                <Select\n                  value={form.endTime}\n                  onValueChange={(val) => setForm({ ...form, endTime: val })}\n                >\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select end\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {timeOptions.map((opt) => (\n                      <SelectItem key={opt.value} value={opt.value}>\n                        {opt.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            {/* Auto-calculated hours preview */}\n            {form.startTime && form.endTime && (\n              <div className=\"flex items-center gap-3 rounded-md border border-border bg-muted/50 px-4 py-3\">\n                <div className=\"flex flex-col\">\n                  <span className=\"text-muted-foreground\">\n                    Calculated Hours\n                  </span>\n                  <span className=\"font-mono font-bold\">\n                    {calculatedHours > 0\n                      ? calculatedHours.toFixed(2)\n                      : \"Invalid range\"}\n                  </span>\n                </div>\n                {calculatedHours > 0 && FLAT_RATE == null && (\n                  <div className=\"ml-auto flex flex-col text-right\">\n                    <span className=\"text-muted-foreground\">\n                      Estimated Cost\n                    </span>\n                    <span className=\"font-mono font-bold text-primary\">\n                      {HOURLY_RATE != null ? formatCurrency(calculatedHours * HOURLY_RATE) : \"TBD\"}\n                    </span>\n                  </div>\n                )}\n              </div>\n            )}\n\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"entry-tasks\">Tasks</Label>\n              <Textarea\n                id=\"entry-tasks\"\n                placeholder=\"Describe the work performed...\"\n                rows={3}\n                value={form.tasks}\n                onChange={(e) => setForm({ ...form, tasks: e.target.value })}\n              />\n            </div>\n            {/* Receipts / Attachments */}\n            <div className=\"flex flex-col gap-1.5\">\n              <Label>Receipts</Label>\n              <input\n                type=\"file\"\n                accept=\"image/*,.pdf,application/pdf\"\n                multiple\n                className=\"text-sm file:mr-3 file:rounded-md file:border-0 file:bg-primary file:px-3 file:py-1.5 file:text-sm file:font-medium file:text-primary-foreground hover:file:bg-primary/90\"\n                onChange={(e) => {\n                  const files = Array.from(e.target.files ?? []);\n                  const valid = files.filter((f) => {\n                    if (f.size > MAX_FILE_SIZE) {\n                      setError(`\"${f.name}\" exceeds 5 MB limit`);\n                      return false;\n                    }\n                    return true;\n                  });\n                  setPendingFiles((prev) => [...prev, ...valid]);\n                  e.target.value = \"\";\n                }}\n              />\n\n              {/* Existing attachments */}\n              {existingAttachments\n                .filter(\n                  (a) => !attachmentsToDelete.some((d) => d.path === a.path),\n                )\n                .map((att) => (\n                  <div\n                    key={att.path}\n                    className=\"flex items-center gap-2 rounded-md border px-3 py-1.5 text-sm\"\n                  >\n                    <Paperclip className=\"h-3.5 w-3.5 shrink-0 text-muted-foreground\" />\n                    <span className=\"truncate\">{att.name}</span>\n                    <span className=\"ml-auto text-muted-foreground\">\n                      {(att.size / 1024).toFixed(0)} KB\n                    </span>\n                    <button\n                      type=\"button\"\n                      className=\"text-destructive hover:text-destructive/80\"\n                      onClick={() =>\n                        setAttachmentsToDelete((prev) => [...prev, att])\n                      }\n                    >\n                      <X className=\"h-3.5 w-3.5\" />\n                    </button>\n                  </div>\n                ))}\n\n              {/* Pending files */}\n              {pendingFiles.map((file, idx) => (\n                <div\n                  key={`pending-${idx}`}\n                  className=\"flex items-center gap-2 rounded-md border border-dashed px-3 py-1.5 text-sm\"\n                >\n                  <Paperclip className=\"h-3.5 w-3.5 shrink-0 text-muted-foreground\" />\n                  <span className=\"truncate\">{file.name}</span>\n                  <span className=\"ml-auto text-muted-foreground\">\n                    {(file.size / 1024).toFixed(0)} KB\n                  </span>\n                  <button\n                    type=\"button\"\n                    className=\"text-destructive hover:text-destructive/80\"\n                    onClick={() =>\n                      setPendingFiles((prev) =>\n                        prev.filter((_, i) => i !== idx),\n                      )\n                    }\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n\n            {/* Links */}\n            <div className=\"flex flex-col gap-1.5\">\n              <Label>Links</Label>\n              {form.links.map((link, idx) => (\n                <div key={idx} className=\"flex items-center gap-2\">\n                  <Input\n                    placeholder=\"Label\"\n                    value={link.label}\n                    onChange={(e) => {\n                      const updated = [...form.links];\n                      updated[idx] = { ...updated[idx], label: e.target.value };\n                      setForm({ ...form, links: updated });\n                    }}\n                    className=\"w-1/3\"\n                  />\n                  <Input\n                    placeholder=\"https://...\"\n                    value={link.url}\n                    onChange={(e) => {\n                      const updated = [...form.links];\n                      updated[idx] = { ...updated[idx], url: e.target.value };\n                      setForm({ ...form, links: updated });\n                    }}\n                    className=\"flex-1\"\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"text-destructive hover:text-destructive/80\"\n                    onClick={() =>\n                      setForm({\n                        ...form,\n                        links: form.links.filter((_, i) => i !== idx),\n                      })\n                    }\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                  </button>\n                </div>\n              ))}\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() =>\n                  setForm({\n                    ...form,\n                    links: [...form.links, { url: \"\", label: \"\" }],\n                  })\n                }\n              >\n                <Plus className=\"mr-1.5 h-3.5 w-3.5\" /> Add Link\n              </Button>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSave}\n              disabled={\n                uploading ||\n                !form.date ||\n                !form.startTime ||\n                (!!form.endTime && calculatedHours <= 0)\n              }\n            >\n              {uploading\n                ? \"Uploading...\"\n                : editingEntry\n                  ? \"Save Changes\"\n                  : \"Add Entry\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog\n        open={deleteConfirm !== null}\n        onOpenChange={() => setDeleteConfirm(null)}\n      >\n        <DialogContent className=\"sm:max-w-sm\">\n          <DialogHeader>\n            <DialogTitle>Delete Time Entry</DialogTitle>\n            <DialogDescription>\n              Are you sure you want to delete this time entry? This action\n              cannot be undone.\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setDeleteConfirm(null)}>\n              Cancel\n            </Button>\n            <Button\n              variant=\"destructive\"\n              onClick={() => deleteConfirm && handleDelete(deleteConfirm)}\n            >\n              Delete\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* View Attachments Dialog */}\n      <Dialog\n        open={viewAttachmentsEntry !== null}\n        onOpenChange={() => setViewAttachmentsEntry(null)}\n      >\n        <DialogContent className=\"sm:max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Receipts</DialogTitle>\n            <DialogDescription>\n              {viewAttachmentsEntry?.attachments?.length ?? 0} receipt(s)\n              attached to this entry.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4 max-h-[60vh] overflow-y-auto\">\n            {viewAttachmentsEntry?.attachments?.map((att) => {\n              const url = getAttachmentUrl(supabase, att.path);\n              return (\n                <div key={att.path} className=\"flex flex-col gap-2\">\n                  {att.name.toLowerCase().endsWith(\".pdf\") ? (\n                    <iframe\n                      src={url}\n                      title={att.name}\n                      className=\"w-full rounded-md border h-64\"\n                    />\n                  ) : (\n                    <img\n                      src={url}\n                      alt={att.name}\n                      className=\"w-full rounded-md border object-contain max-h-64\"\n                    />\n                  )}\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"truncate font-medium\">{att.name}</span>\n                    <span className=\"text-muted-foreground\">\n                      {(att.size / 1024).toFixed(0)} KB\n                    </span>\n                    <a\n                      href={url}\n                      download={att.name}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"ml-auto inline-flex items-center gap-1 text-primary hover:underline\"\n                    >\n                      <Download className=\"h-3.5 w-3.5\" />\n                      Download\n                    </a>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setViewAttachmentsEntry(null)}\n            >\n              Close\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* View Links Dialog */}\n      <Dialog open={viewLinksEntry !== null} onOpenChange={() => setViewLinksEntry(null)}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Links</DialogTitle>\n            <DialogDescription>{viewLinksEntry?.links?.length ?? 0} link(s)</DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-2\">\n            {viewLinksEntry?.links?.map((link, idx) => (\n              <a key={idx} href={link.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2 text-sm text-primary hover:underline\">\n                <ExternalLink className=\"h-3.5 w-3.5 shrink-0\" />\n                {link.label || link.url}\n              </a>\n            ))}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setViewLinksEntry(null)}>Close</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Rate Dialog */}\n      {onRateChange && (\n        <Dialog open={rateDialogOpen} onOpenChange={setRateDialogOpen}>\n          <DialogContent className=\"sm:max-w-sm\">\n            <DialogHeader>\n              <DialogTitle>Update Rate</DialogTitle>\n              <DialogDescription>\n                Set an hourly rate or flat rate for this billing period.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div className=\"flex flex-col gap-1.5\">\n                  <Label htmlFor=\"edit-hourly-rate\">Hourly Rate</Label>\n                  <Input\n                    id=\"edit-hourly-rate\"\n                    type=\"number\"\n                    placeholder=\"e.g. 75\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={editHourlyRate}\n                    onChange={(e) => setEditHourlyRate(e.target.value)}\n                    disabled={!!editFlatRate.trim()}\n                  />\n                </div>\n                <div className=\"flex flex-col gap-1.5\">\n                  <Label htmlFor=\"edit-flat-rate\">Flat Rate</Label>\n                  <Input\n                    id=\"edit-flat-rate\"\n                    type=\"number\"\n                    placeholder=\"e.g. 5000\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={editFlatRate}\n                    onChange={(e) => setEditFlatRate(e.target.value)}\n                    disabled={!!editHourlyRate.trim()}\n                  />\n                </div>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">Set either an hourly rate or a flat rate, not both.</p>\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setRateDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button\n                onClick={() => {\n                  const newHourly = editHourlyRate.trim() ? Number(editHourlyRate) : null;\n                  const newFlat = editFlatRate.trim() ? Number(editFlatRate) : null;\n                  onRateChange(newHourly, newFlat);\n                  setRateDialogOpen(false);\n                }}\n                disabled={!editHourlyRate.trim() && !editFlatRate.trim()}\n              >\n                Update Rate\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4271, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/subscriptions-section.tsx"],"sourcesContent":[";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableFooter,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  type Subscription,\n  type Attachment,\n  type Link,\n  subscriptionCategories,\n} from \"@/lib/project-data\";\nimport {\n  fetchSubscriptions,\n  upsertSubscription,\n  deleteSubscription as deleteSubscriptionApi,\n  uploadAttachment,\n  getAttachmentUrl,\n  deleteAttachment,\n  deleteAllAttachments,\n} from \"@/lib/supabase\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { Plus, Pencil, Trash2, Paperclip, X, Download, ExternalLink } from \"lucide-react\";\n\nfunction formatCurrency(n: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2,\n  }).format(n);\n}\n\nconst emptySubscription: Omit<Subscription, \"id\"> = {\n  name: \"\",\n  category: subscriptionCategories[0],\n  billingCycle: \"monthly\",\n  amount: 0,\n  renewalDate: \"\",\n  notes: \"\",\n  attachments: [],\n  links: [],\n};\n\nexport function SubscriptionsSection({\n  editMode = false,\n  clientId = \"cygnet\",\n  refreshKey = 0,\n}: {\n  editMode?: boolean;\n  clientId?: string;\n  refreshKey?: number;\n}) {\n  const { supabase } = useAuth();\n  const [subscriptions, setSubscriptions] = useState<Subscription[]>([]);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [form, setForm] = useState<Omit<Subscription, \"id\">>(emptySubscription);\n  const [pendingFiles, setPendingFiles] = useState<File[]>([]);\n  const [existingAttachments, setExistingAttachments] = useState<Attachment[]>(\n    [],\n  );\n  const [attachmentsToDelete, setAttachmentsToDelete] = useState<Attachment[]>(\n    [],\n  );\n  const [uploading, setUploading] = useState(false);\n  const [viewAttachmentsSub, setViewAttachmentsSub] =\n    useState<Subscription | null>(null);\n  const [viewLinksSub, setViewLinksSub] = useState<Subscription | null>(null);\n\n  const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB\n\n  // Fetch subscriptions from Supabase on mount / client change\n  useEffect(() => {\n    let cancelled = false;\n    setLoaded(false);\n    setError(null);\n\n    async function load() {\n      try {\n        const rows = await fetchSubscriptions(supabase, clientId);\n        if (cancelled) return;\n\n        setSubscriptions(rows);\n      } catch (err) {\n        if (!cancelled)\n          setError(\n            err instanceof Error ? err.message : \"Failed to load subscriptions\",\n          );\n      } finally {\n        if (!cancelled) setLoaded(true);\n      }\n    }\n\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [clientId, supabase, refreshKey]);\n\n  const totalMonthly = subscriptions.reduce((sum, s) => {\n    if (s.billingCycle === \"monthly\") return sum + s.amount;\n    return sum + s.amount / 12;\n  }, 0);\n\n  const totalAnnual = totalMonthly * 12;\n\n  const openAdd = useCallback(() => {\n    setEditingId(null);\n    setForm(emptySubscription);\n    setPendingFiles([]);\n    setExistingAttachments([]);\n    setAttachmentsToDelete([]);\n    setDialogOpen(true);\n  }, []);\n\n  const openEdit = useCallback((sub: Subscription) => {\n    setEditingId(sub.id);\n    setForm({\n      name: sub.name,\n      category: sub.category,\n      billingCycle: sub.billingCycle,\n      amount: sub.amount,\n      renewalDate: sub.renewalDate,\n      notes: sub.notes,\n      attachments: sub.attachments ?? [],\n      links: sub.links ?? [],\n    });\n    setPendingFiles([]);\n    setExistingAttachments(sub.attachments ?? []);\n    setAttachmentsToDelete([]);\n    setDialogOpen(true);\n  }, []);\n\n  const handleSave = useCallback(async () => {\n    if (!form.name.trim()) return;\n\n    const subId = editingId ?? crypto.randomUUID();\n\n    try {\n      setUploading(true);\n\n      // Delete attachments marked for removal\n      for (const att of attachmentsToDelete) {\n        await deleteAttachment(supabase, att.path);\n      }\n\n      // Upload new files\n      const newAttachments: Attachment[] = [];\n      for (const file of pendingFiles) {\n        const att = await uploadAttachment(supabase, file, clientId, subId);\n        newAttachments.push(att);\n      }\n\n      // Compute final attachments list\n      const remainingExisting = existingAttachments.filter(\n        (a) => !attachmentsToDelete.some((d) => d.path === a.path),\n      );\n      const finalAttachments = [...remainingExisting, ...newAttachments];\n\n      if (editingId) {\n        const updated: Subscription = {\n          id: editingId,\n          ...form,\n          attachments: finalAttachments,\n        };\n        setSubscriptions((prev) =>\n          prev.map((s) => (s.id === editingId ? updated : s)),\n        );\n        await upsertSubscription(supabase, updated, clientId);\n      } else {\n        const newSub: Subscription = {\n          id: subId,\n          ...form,\n          attachments: finalAttachments,\n        };\n        setSubscriptions((prev) => [...prev, newSub]);\n        await upsertSubscription(supabase, newSub, clientId);\n      }\n      setDialogOpen(false);\n    } catch (err) {\n      setError(\n        err instanceof Error ? err.message : \"Failed to save subscription\",\n      );\n      // Re-fetch to restore consistent state\n      try {\n        const rows = await fetchSubscriptions(supabase, clientId);\n        setSubscriptions(rows);\n      } catch {\n        /* keep error visible */\n      }\n    } finally {\n      setUploading(false);\n    }\n  }, [\n    editingId,\n    form,\n    clientId,\n    supabase,\n    pendingFiles,\n    existingAttachments,\n    attachmentsToDelete,\n  ]);\n\n  const handleDelete = useCallback(\n    async (id: string) => {\n      const prev = subscriptions;\n      const subToDelete = subscriptions.find((s) => s.id === id);\n      setSubscriptions((current) => current.filter((s) => s.id !== id));\n\n      try {\n        if (subToDelete?.attachments?.length) {\n          await deleteAllAttachments(supabase, subToDelete.attachments);\n        }\n        await deleteSubscriptionApi(supabase, id);\n      } catch (err) {\n        setError(\n          err instanceof Error ? err.message : \"Failed to delete subscription\",\n        );\n        setSubscriptions(prev);\n      }\n    },\n    [subscriptions],\n  );\n\n  if (!loaded) return null;\n\n  if (subscriptions.length === 0 && !editMode) return null;\n\n  return (\n    <div className=\"flex flex-col gap-6\">\n      {error && (\n        <Card className=\"border-destructive\">\n          <CardContent className=\"p-4text-destructive\">\n            {error}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"ml-2\"\n              onClick={() => setError(null)}\n            >\n              Dismiss\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between pb-4\">\n          <div>\n            <CardTitle>Software Subscriptions</CardTitle>\n          </div>\n          {editMode && (\n            <Button size=\"sm\" onClick={openAdd} className=\"gap-1.5\">\n              <Plus className=\"h-4 w-4\" />\n              Add Subscription\n            </Button>\n          )}\n        </CardHeader>\n        {subscriptions.length > 0 && (\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Name</TableHead>\n                  <TableHead>Category</TableHead>\n                  <TableHead className=\"w-[110px]\">Billing Cycle</TableHead>\n                  <TableHead className=\"w-[110px]\">Renewal Date</TableHead>\n                  <TableHead>Notes</TableHead>\n                  <TableHead className=\"w-[100px] text-right\">Amount</TableHead>\n                  {editMode && (\n                    <TableHead className=\"w-[100px] text-right\">\n                      Actions\n                    </TableHead>\n                  )}\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {subscriptions.map((sub) => (\n                    <TableRow key={sub.id}>\n                      <TableCell className=\"font-medium\">{sub.name}</TableCell>\n                      <TableCell className=\"text-muted-foreground\">\n                        {sub.category}\n                      </TableCell>\n                      <TableCell className=\"capitalize\">\n                        {sub.billingCycle}\n                      </TableCell>\n                      <TableCell className=\"text-muted-foreground\">\n                        {sub.renewalDate ? (() => { const d = new Date(sub.renewalDate + \"T00:00:00\"); return `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`; })() : \"\\u2014\"}\n                      </TableCell>\n                      <TableCell className=\"max-w-[160px] text-muted-foreground\">\n                        {sub.notes || \"\\u2014\"}\n                      </TableCell>\n                      <TableCell className=\"text-right font-mono\">\n                        <span className=\"inline-flex items-center gap-1.5\">\n                          {formatCurrency(sub.amount)}\n                          <span className=\"ml-1 text-muted-foreground\">\n                            /{sub.billingCycle === \"monthly\" ? \"mo\" : \"yr\"}\n                          </span>\n                          {sub.attachments?.length > 0 && (\n                            <button\n                              type=\"button\"\n                              className=\"inline-flex text-muted-foreground hover:text-primary\"\n                              title={`${sub.attachments.length} receipt(s)`}\n                              onClick={() => setViewAttachmentsSub(sub)}\n                            >\n                              <Paperclip className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                          {sub.links?.length > 0 && (\n                            <button type=\"button\" className=\"inline-flex text-muted-foreground hover:text-primary\" title={`${sub.links.length} link(s)`} onClick={() => setViewLinksSub(sub)}>\n                              <ExternalLink className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                        </span>\n                      </TableCell>\n                      {editMode && (\n                        <TableCell className=\"text-right\">\n                          <div className=\"flex items-center justify-end gap-1\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              className=\"h-8 w-8\"\n                              onClick={() => openEdit(sub)}\n                            >\n                              <Pencil className=\"h-3.5 w-3.5\" />\n                              <span className=\"sr-only\">Edit</span>\n                            </Button>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              className=\"h-8 w-8 text-destructive hover:text-destructive\"\n                              onClick={() => handleDelete(sub.id)}\n                            >\n                              <Trash2 className=\"h-3.5 w-3.5\" />\n                              <span className=\"sr-only\">Delete</span>\n                            </Button>\n                          </div>\n                        </TableCell>\n                      )}\n                    </TableRow>\n                  ))}\n              </TableBody>\n                <TableFooter>\n                  <TableRow>\n                    <TableCell colSpan={5} className=\"font-semibold\">\n                      Total\n                    </TableCell>\n                    <TableCell className=\"text-right font-mono font-semibold text-primary\">\n                      {formatCurrency(totalAnnual)}\n                      <span className=\"ml-1 font-normal text-muted-foreground\">\n                        /yr\n                      </span>\n                    </TableCell>\n                    {editMode && <TableCell />}\n                  </TableRow>\n                </TableFooter>\n            </Table>\n          </div>\n        </CardContent>\n        )}\n      </Card>\n\n      {/* Add/Edit Dialog */}\n      <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n        <DialogContent className=\"sm:max-w-[480px]\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingId ? \"Edit Subscription\" : \"Add Subscription\"}\n            </DialogTitle>\n            <DialogDescription>\n              {editingId\n                ? \"Update the subscription details below.\"\n                : \"Enter the details for the new subscription.\"}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4 py-2\">\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"sub-name\">Name</Label>\n              <Input\n                id=\"sub-name\"\n                value={form.name}\n                onChange={(e) => setForm({ ...form, name: e.target.value })}\n                placeholder=\"e.g. Vercel Pro\"\n              />\n            </div>\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"sub-category\">Category</Label>\n              <Select\n                value={form.category}\n                onValueChange={(v) => setForm({ ...form, category: v })}\n              >\n                <SelectTrigger id=\"sub-category\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {subscriptionCategories.map((cat) => (\n                    <SelectItem key={cat} value={cat}>\n                      {cat}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"sub-cycle\">Billing Cycle</Label>\n                <Select\n                  value={form.billingCycle}\n                  onValueChange={(v) =>\n                    setForm({\n                      ...form,\n                      billingCycle: v as \"monthly\" | \"annual\",\n                    })\n                  }\n                >\n                  <SelectTrigger id=\"sub-cycle\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"monthly\">Monthly</SelectItem>\n                    <SelectItem value=\"annual\">Annual</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"sub-amount\">\n                  Amount ($/{form.billingCycle === \"monthly\" ? \"mo\" : \"yr\"})\n                </Label>\n                <Input\n                  id=\"sub-amount\"\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={form.amount || \"\"}\n                  onChange={(e) =>\n                    setForm({\n                      ...form,\n                      amount: Number.parseFloat(e.target.value) || 0,\n                    })\n                  }\n                  placeholder=\"0.00\"\n                />\n              </div>\n            </div>\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"sub-renewal\">Renewal Date</Label>\n              <Input\n                id=\"sub-renewal\"\n                type=\"date\"\n                value={form.renewalDate}\n                onChange={(e) =>\n                  setForm({ ...form, renewalDate: e.target.value })\n                }\n              />\n            </div>\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"sub-notes\">Notes</Label>\n              <Input\n                id=\"sub-notes\"\n                value={form.notes}\n                onChange={(e) => setForm({ ...form, notes: e.target.value })}\n                placeholder=\"Optional notes\"\n              />\n            </div>\n\n            {/* Links */}\n            <div className=\"flex flex-col gap-1.5\">\n              <Label>Links</Label>\n              {form.links.map((link, idx) => (\n                <div key={idx} className=\"flex items-center gap-2\">\n                  <Input placeholder=\"Label\" value={link.label} onChange={(e) => { const updated = [...form.links]; updated[idx] = { ...updated[idx], label: e.target.value }; setForm({ ...form, links: updated }); }} className=\"w-1/3\" />\n                  <Input placeholder=\"https://...\" value={link.url} onChange={(e) => { const updated = [...form.links]; updated[idx] = { ...updated[idx], url: e.target.value }; setForm({ ...form, links: updated }); }} className=\"flex-1\" />\n                  <button type=\"button\" className=\"text-destructive hover:text-destructive/80\" onClick={() => setForm({ ...form, links: form.links.filter((_, i) => i !== idx) })}><X className=\"h-3.5 w-3.5\" /></button>\n                </div>\n              ))}\n              <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => setForm({ ...form, links: [...form.links, { url: \"\", label: \"\" }] })}>\n                <Plus className=\"mr-1.5 h-3.5 w-3.5\" /> Add Link\n              </Button>\n            </div>\n\n            {/* Receipts / Attachments */}\n            <div className=\"flex flex-col gap-1.5\">\n              <Label>Receipts</Label>\n              <input\n                type=\"file\"\n                accept=\"image/*,.pdf,application/pdf\"\n                multiple\n                className=\"text-sm file:mr-3 file:rounded-md file:border-0 file:bg-primary file:px-3 file:py-1.5 file:text-sm file:font-medium file:text-primary-foreground hover:file:bg-primary/90\"\n                onChange={(e) => {\n                  const files = Array.from(e.target.files ?? []);\n                  const valid = files.filter((f) => {\n                    if (f.size > MAX_FILE_SIZE) {\n                      setError(`\"${f.name}\" exceeds 5 MB limit`);\n                      return false;\n                    }\n                    return true;\n                  });\n                  setPendingFiles((prev) => [...prev, ...valid]);\n                  e.target.value = \"\";\n                }}\n              />\n\n              {/* Existing attachments */}\n              {existingAttachments\n                .filter(\n                  (a) => !attachmentsToDelete.some((d) => d.path === a.path),\n                )\n                .map((att) => (\n                  <div\n                    key={att.path}\n                    className=\"flex items-center gap-2 rounded-md border px-3 py-1.5 text-sm\"\n                  >\n                    <Paperclip className=\"h-3.5 w-3.5 shrink-0 text-muted-foreground\" />\n                    <span className=\"truncate\">{att.name}</span>\n                    <span className=\"ml-auto text-muted-foreground\">\n                      {(att.size / 1024).toFixed(0)} KB\n                    </span>\n                    <button\n                      type=\"button\"\n                      className=\"text-destructive hover:text-destructive/80\"\n                      onClick={() =>\n                        setAttachmentsToDelete((prev) => [...prev, att])\n                      }\n                    >\n                      <X className=\"h-3.5 w-3.5\" />\n                    </button>\n                  </div>\n                ))}\n\n              {/* Pending files */}\n              {pendingFiles.map((file, idx) => (\n                <div\n                  key={`pending-${idx}`}\n                  className=\"flex items-center gap-2 rounded-md border border-dashed px-3 py-1.5 text-sm\"\n                >\n                  <Paperclip className=\"h-3.5 w-3.5 shrink-0 text-muted-foreground\" />\n                  <span className=\"truncate\">{file.name}</span>\n                  <span className=\"ml-auto text-muted-foreground\">\n                    {(file.size / 1024).toFixed(0)} KB\n                  </span>\n                  <button\n                    type=\"button\"\n                    className=\"text-destructive hover:text-destructive/80\"\n                    onClick={() =>\n                      setPendingFiles((prev) =>\n                        prev.filter((_, i) => i !== idx),\n                      )\n                    }\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSave}\n              disabled={uploading || !form.name.trim()}\n            >\n              {uploading\n                ? \"Uploading...\"\n                : editingId\n                  ? \"Save Changes\"\n                  : \"Add Subscription\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* View Attachments Dialog */}\n      <Dialog\n        open={viewAttachmentsSub !== null}\n        onOpenChange={() => setViewAttachmentsSub(null)}\n      >\n        <DialogContent className=\"sm:max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Receipts</DialogTitle>\n            <DialogDescription>\n              {viewAttachmentsSub?.attachments?.length ?? 0} receipt(s) attached\n              to this subscription.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4 max-h-[60vh] overflow-y-auto\">\n            {viewAttachmentsSub?.attachments?.map((att) => {\n              const url = getAttachmentUrl(supabase, att.path);\n              return (\n                <div key={att.path} className=\"flex flex-col gap-2\">\n                  {att.name.toLowerCase().endsWith(\".pdf\") ? (\n                    <iframe\n                      src={url}\n                      title={att.name}\n                      className=\"w-full rounded-md border h-64\"\n                    />\n                  ) : (\n                    <img\n                      src={url}\n                      alt={att.name}\n                      className=\"w-full rounded-md border object-contain max-h-64\"\n                    />\n                  )}\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"truncate font-medium\">{att.name}</span>\n                    <span className=\"text-muted-foreground\">\n                      {(att.size / 1024).toFixed(0)} KB\n                    </span>\n                    <a\n                      href={url}\n                      download={att.name}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"ml-auto inline-flex items-center gap-1 text-primary hover:underline\"\n                    >\n                      <Download className=\"h-3.5 w-3.5\" />\n                      Download\n                    </a>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setViewAttachmentsSub(null)}\n            >\n              Close\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* View Links Dialog */}\n      <Dialog open={viewLinksSub !== null} onOpenChange={() => setViewLinksSub(null)}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Links</DialogTitle>\n            <DialogDescription>{viewLinksSub?.links?.length ?? 0} link(s)</DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-2\">\n            {viewLinksSub?.links?.map((link, idx) => (\n              <a key={idx} href={link.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2 text-sm text-primary hover:underline\">\n                <ExternalLink className=\"h-3.5 w-3.5 shrink-0\" />\n                {link.label || link.url}\n              </a>\n            ))}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setViewLinksSub(null)}>Close</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5710, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/payables-section.tsx"],"sourcesContent":[";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableFooter,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport type { Payable, Attachment, Link } from \"@/lib/project-data\";\nimport {\n  fetchPayables,\n  fetchTimeEntries,\n  upsertPayable,\n  deletePayable as deletePayableApi,\n  deletePayableByMatch,\n  updateNextierMirror,\n  uploadAttachment,\n  getAttachmentUrl,\n  deleteAttachment,\n  deleteAllAttachments,\n} from \"@/lib/supabase\";\nimport { useAuth } from \"@/lib/auth-context\";\nimport { Plus, Pencil, Trash2, Paperclip, X, Download, ExternalLink } from \"lucide-react\";\n\nfunction formatCurrency(n: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2,\n  }).format(n);\n}\n\nfunction todayISO() {\n  return new Date().toISOString().slice(0, 10);\n}\n\nconst emptyForm = {\n  description: \"\",\n  amount: 0,\n  date: todayISO(),\n  notes: \"\",\n  links: [] as Link[],\n};\n\nexport function PayablesSection({\n  editMode = false,\n  clientId = \"cygnet\",\n  hourlyRate = null,\n  flatRate = null,\n  onPayablesChange,\n}: {\n  editMode?: boolean;\n  clientId?: string;\n  hourlyRate?: number | null;\n  flatRate?: number | null;\n  onPayablesChange?: () => void;\n}) {\n  const { supabase } = useAuth();\n  const [payables, setPayables] = useState<Payable[]>([]);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [form, setForm] = useState(emptyForm);\n  const [saving, setSaving] = useState(false);\n  const [pendingFiles, setPendingFiles] = useState<File[]>([]);\n  const [existingAttachments, setExistingAttachments] = useState<Attachment[]>([]);\n  const [attachmentsToDelete, setAttachmentsToDelete] = useState<Attachment[]>([]);\n  const [viewAttachmentsPayable, setViewAttachmentsPayable] = useState<Payable | null>(null);\n  const [viewLinksPayable, setViewLinksPayable] = useState<Payable | null>(null);\n  const [tenPercent, setTenPercent] = useState(0);\n\n  const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB\n\n  useEffect(() => {\n    let cancelled = false;\n    setLoaded(false);\n    setError(null);\n\n    async function load() {\n      try {\n        const isNextier = clientId === \"nextier\";\n        const [rows, entries] = await Promise.all([\n          fetchPayables(supabase, clientId),\n          isNextier ? Promise.resolve([]) : fetchTimeEntries(supabase, clientId),\n        ]);\n        if (cancelled) return;\n        setPayables(rows);\n\n        const totalHours = entries.reduce((sum, e) => sum + e.totalHours, 0);\n        const timeCost =\n          flatRate != null\n            ? flatRate\n            : hourlyRate != null\n              ? totalHours * hourlyRate\n              : 0;\n        setTenPercent(Math.round(timeCost * 0.1 * 100) / 100);\n      } catch (err) {\n        if (!cancelled)\n          setError(\n            err instanceof Error ? err.message : \"Failed to load payables\",\n          );\n      } finally {\n        if (!cancelled) setLoaded(true);\n      }\n    }\n\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [clientId, supabase, hourlyRate, flatRate]);\n\n  const total = payables.reduce((sum, p) => sum + p.amount, 0);\n\n  const openAdd = useCallback(() => {\n    setEditingId(null);\n    setForm({\n      ...emptyForm,\n      date: todayISO(),\n      amount: tenPercent,\n      description: tenPercent > 0 ? \"10% of time entries\" : \"\",\n      links: [],\n    });\n    setPendingFiles([]);\n    setExistingAttachments([]);\n    setAttachmentsToDelete([]);\n    setDialogOpen(true);\n  }, [tenPercent]);\n\n  const openEdit = useCallback((p: Payable) => {\n    setEditingId(p.id);\n    setForm({\n      description: p.description,\n      amount: p.amount,\n      date: p.date,\n      notes: p.notes,\n      links: p.links ?? [],\n    });\n    setPendingFiles([]);\n    setExistingAttachments(p.attachments ?? []);\n    setAttachmentsToDelete([]);\n    setDialogOpen(true);\n  }, []);\n\n  const handleSave = useCallback(async () => {\n    if (!form.description.trim()) return;\n\n    const payableId = editingId ?? crypto.randomUUID();\n\n    try {\n      setSaving(true);\n\n      // Delete attachments marked for removal\n      for (const att of attachmentsToDelete) {\n        await deleteAttachment(supabase, att.path);\n      }\n\n      // Upload new files\n      const newAttachments: Attachment[] = [];\n      for (const file of pendingFiles) {\n        const att = await uploadAttachment(supabase, file, clientId, payableId);\n        newAttachments.push(att);\n      }\n\n      // Compute final attachments list\n      const remainingExisting = existingAttachments.filter(\n        (a) => !attachmentsToDelete.some((d) => d.path === a.path),\n      );\n      const finalAttachments = [...remainingExisting, ...newAttachments];\n\n      if (editingId) {\n        const existing = payables.find((p) => p.id === editingId);\n        const updated: Payable = {\n          id: editingId,\n          description: form.description,\n          amount: form.amount,\n          date: form.date,\n          paid: existing?.paid ?? false,\n          paidDate: existing?.paidDate ?? \"\",\n          notes: form.notes,\n          attachments: finalAttachments,\n          links: form.links,\n        };\n        setPayables((prev) =>\n          prev.map((p) => (p.id === editingId ? updated : p)),\n        );\n        await upsertPayable(supabase, updated, clientId);\n\n        // Sync changes to the Nextier mirror\n        if (clientId !== \"nextier\" && existing) {\n          await updateNextierMirror(supabase, existing.description, existing.amount, existing.date, {\n            description: updated.description,\n            amount: updated.amount,\n            date: updated.date,\n            notes: updated.notes,\n            attachments: finalAttachments,\n            links: form.links,\n          });\n        }\n      } else {\n        const newPayable: Payable = {\n          id: payableId,\n          description: form.description,\n          amount: form.amount,\n          date: form.date,\n          paid: false,\n          paidDate: \"\",\n          notes: form.notes,\n          attachments: finalAttachments,\n          links: form.links,\n        };\n        setPayables((prev) => [newPayable, ...prev]);\n        await upsertPayable(supabase, newPayable, clientId);\n\n        // Mirror as a paid proceed on the Nextier client\n        if (clientId !== \"nextier\") {\n          const nextierPayable: Payable = {\n            id: crypto.randomUUID(),\n            description: form.description,\n            amount: form.amount,\n            date: form.date,\n            paid: true,\n            paidDate: todayISO(),\n            notes: form.notes,\n            attachments: finalAttachments,\n            links: form.links,\n          };\n          await upsertPayable(supabase, nextierPayable, \"nextier\");\n        }\n      }\n      setDialogOpen(false);\n      onPayablesChange?.();\n    } catch (err) {\n      setError(\n        err instanceof Error ? err.message : \"Failed to save payable\",\n      );\n      try {\n        const rows = await fetchPayables(supabase, clientId);\n        setPayables(rows);\n      } catch {\n        /* keep error visible */\n      }\n    } finally {\n      setSaving(false);\n    }\n  }, [editingId, form, clientId, supabase, payables, pendingFiles, existingAttachments, attachmentsToDelete]);\n\n  const handleDelete = useCallback(\n    async (id: string) => {\n      const prev = payables;\n      const toDelete = payables.find((p) => p.id === id);\n      setPayables((current) => current.filter((p) => p.id !== id));\n\n      try {\n        if (toDelete?.attachments?.length) {\n          await deleteAllAttachments(supabase, toDelete.attachments);\n        }\n        await deletePayableApi(supabase, id);\n\n        // Also delete the mirror record on Nextier\n        if (clientId !== \"nextier\" && toDelete) {\n          await deletePayableByMatch(\n            supabase,\n            \"nextier\",\n            toDelete.description,\n            toDelete.amount,\n            toDelete.date,\n          );\n        }\n        onPayablesChange?.();\n      } catch (err) {\n        setError(\n          err instanceof Error ? err.message : \"Failed to delete payable\",\n        );\n        setPayables(prev);\n      }\n    },\n    [payables, supabase],\n  );\n\n  if (!loaded) return null;\n\n  if (payables.length === 0 && !editMode && clientId !== \"nextier\") return null;\n\n  return (\n    <div className=\"flex flex-col gap-6\">\n      {error && (\n        <Card className=\"border-destructive\">\n          <CardContent className=\"p-4 text-destructive\">\n            {error}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"ml-2\"\n              onClick={() => setError(null)}\n            >\n              Dismiss\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between pb-4\">\n          <div>\n            <CardTitle>{clientId === \"nextier\" ? \"Nextier Proceeds\" : \"Payables\"}</CardTitle>\n          </div>\n          {editMode && clientId !== \"nextier\" && (\n            <Button size=\"sm\" onClick={openAdd} className=\"gap-1.5\">\n              <Plus className=\"h-4 w-4\" />\n              Add Payable\n            </Button>\n          )}\n        </CardHeader>\n        {payables.length > 0 && (\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead className=\"w-[110px]\">Date</TableHead>\n                  <TableHead>Description</TableHead>\n                  <TableHead>Notes</TableHead>\n                  <TableHead className=\"w-[100px] text-right\">Amount</TableHead>\n                  {editMode && clientId !== \"nextier\" && (\n                    <TableHead className=\"w-[100px] text-right\">\n                      Actions\n                    </TableHead>\n                  )}\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {payables.map((p) => (\n                    <TableRow key={p.id}>\n                      <TableCell className=\"text-muted-foreground\">\n                        {p.date ? (() => { const d = new Date(p.date + \"T00:00:00\"); return `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`; })() : \"\\u2014\"}\n                      </TableCell>\n                      <TableCell className=\"font-medium\">\n                        {p.description}\n                      </TableCell>\n                      <TableCell className=\"max-w-[160px] text-muted-foreground\">\n                        {p.notes || \"\\u2014\"}\n                      </TableCell>\n                      <TableCell className=\"text-right font-mono\">\n                        <span className=\"inline-flex items-center gap-1.5\">\n                          {formatCurrency(p.amount)}\n                          {p.attachments?.length > 0 && (\n                            <button\n                              type=\"button\"\n                              className=\"inline-flex text-muted-foreground hover:text-primary\"\n                              title={`${p.attachments.length} file(s)`}\n                              onClick={() => setViewAttachmentsPayable(p)}\n                            >\n                              <Paperclip className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                          {p.links?.length > 0 && (\n                            <button type=\"button\" className=\"inline-flex text-muted-foreground hover:text-primary\" title={`${p.links.length} link(s)`} onClick={() => setViewLinksPayable(p)}>\n                              <ExternalLink className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                        </span>\n                      </TableCell>\n                      {editMode && clientId !== \"nextier\" && (\n                        <TableCell className=\"text-right\">\n                          <div className=\"flex items-center justify-end gap-1\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              className=\"h-8 w-8\"\n                              onClick={() => openEdit(p)}\n                            >\n                              <Pencil className=\"h-3.5 w-3.5\" />\n                              <span className=\"sr-only\">Edit</span>\n                            </Button>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              className=\"h-8 w-8 text-destructive hover:text-destructive\"\n                              onClick={() => handleDelete(p.id)}\n                            >\n                              <Trash2 className=\"h-3.5 w-3.5\" />\n                              <span className=\"sr-only\">Delete</span>\n                            </Button>\n                          </div>\n                        </TableCell>\n                      )}\n                    </TableRow>\n                  ))}\n              </TableBody>\n                <TableFooter>\n                  <TableRow>\n                    <TableCell colSpan={3} className=\"font-semibold\">\n                      Total\n                    </TableCell>\n                    <TableCell className=\"text-right font-mono font-semibold text-primary\">\n                      {formatCurrency(total)}\n                    </TableCell>\n                    {editMode && clientId !== \"nextier\" && <TableCell />}\n                  </TableRow>\n                </TableFooter>\n            </Table>\n          </div>\n        </CardContent>\n        )}\n      </Card>\n\n      {/* View Attachments Dialog */}\n      <Dialog\n        open={viewAttachmentsPayable !== null}\n        onOpenChange={() => setViewAttachmentsPayable(null)}\n      >\n        <DialogContent className=\"sm:max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Attachments</DialogTitle>\n            <DialogDescription>\n              {viewAttachmentsPayable?.attachments?.length ?? 0} file(s) attached\n              to this payable.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4 max-h-[60vh] overflow-y-auto\">\n            {viewAttachmentsPayable?.attachments?.map((att) => {\n              const url = getAttachmentUrl(supabase, att.path);\n              return (\n                <div key={att.path} className=\"flex flex-col gap-2\">\n                  {att.name.toLowerCase().endsWith(\".pdf\") ? (\n                    <iframe\n                      src={url}\n                      title={att.name}\n                      className=\"w-full rounded-md border h-64\"\n                    />\n                  ) : (\n                    <img\n                      src={url}\n                      alt={att.name}\n                      className=\"w-full rounded-md border object-contain max-h-64\"\n                    />\n                  )}\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <span className=\"truncate font-medium\">{att.name}</span>\n                    <span className=\"text-muted-foreground\">\n                      {(att.size / 1024).toFixed(0)} KB\n                    </span>\n                    <a\n                      href={url}\n                      download={att.name}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"ml-auto inline-flex items-center gap-1 text-primary hover:underline\"\n                    >\n                      <Download className=\"h-3.5 w-3.5\" />\n                      Download\n                    </a>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setViewAttachmentsPayable(null)}\n            >\n              Close\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* View Links Dialog */}\n      <Dialog open={viewLinksPayable !== null} onOpenChange={() => setViewLinksPayable(null)}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Links</DialogTitle>\n            <DialogDescription>{viewLinksPayable?.links?.length ?? 0} link(s)</DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-2\">\n            {viewLinksPayable?.links?.map((link, idx) => (\n              <a key={idx} href={link.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2 text-sm text-primary hover:underline\">\n                <ExternalLink className=\"h-3.5 w-3.5 shrink-0\" />\n                {link.label || link.url}\n              </a>\n            ))}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setViewLinksPayable(null)}>Close</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Add/Edit Dialog */}\n      <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n        <DialogContent className=\"sm:max-w-[480px]\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingId ? \"Edit Payable\" : \"Add Payable\"}\n            </DialogTitle>\n            <DialogDescription>\n              {editingId\n                ? \"Update the payable details below.\"\n                : \"Enter the details for the new payable.\"}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4 py-2\">\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"pay-desc\">Description</Label>\n              <Input\n                id=\"pay-desc\"\n                value={form.description}\n                onChange={(e) =>\n                  setForm({ ...form, description: e.target.value })\n                }\n                placeholder=\"e.g. Website development - Phase 1\"\n              />\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"pay-amount\">Amount ($)</Label>\n                <Input\n                  id=\"pay-amount\"\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={form.amount || \"\"}\n                  onChange={(e) =>\n                    setForm({\n                      ...form,\n                      amount: Number.parseFloat(e.target.value) || 0,\n                    })\n                  }\n                  placeholder=\"0.00\"\n                />\n              </div>\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"pay-date\">Date</Label>\n                <Input\n                  id=\"pay-date\"\n                  type=\"date\"\n                  value={form.date}\n                  onChange={(e) => setForm({ ...form, date: e.target.value })}\n                />\n              </div>\n            </div>\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"pay-notes\">Notes</Label>\n              <Input\n                id=\"pay-notes\"\n                value={form.notes}\n                onChange={(e) => setForm({ ...form, notes: e.target.value })}\n                placeholder=\"Optional notes\"\n              />\n            </div>\n\n            {/* Links */}\n            <div className=\"flex flex-col gap-1.5\">\n              <Label>Links</Label>\n              {form.links.map((link: Link, idx: number) => (\n                <div key={idx} className=\"flex items-center gap-2\">\n                  <Input placeholder=\"Label\" value={link.label} onChange={(e) => { const updated = [...form.links]; updated[idx] = { ...updated[idx], label: e.target.value }; setForm({ ...form, links: updated }); }} className=\"w-1/3\" />\n                  <Input placeholder=\"https://...\" value={link.url} onChange={(e) => { const updated = [...form.links]; updated[idx] = { ...updated[idx], url: e.target.value }; setForm({ ...form, links: updated }); }} className=\"flex-1\" />\n                  <button type=\"button\" className=\"text-destructive hover:text-destructive/80\" onClick={() => setForm({ ...form, links: form.links.filter((_: Link, i: number) => i !== idx) })}><X className=\"h-3.5 w-3.5\" /></button>\n                </div>\n              ))}\n              <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={() => setForm({ ...form, links: [...form.links, { url: \"\", label: \"\" }] })}>\n                <Plus className=\"mr-1.5 h-3.5 w-3.5\" /> Add Link\n              </Button>\n            </div>\n\n            {/* Attachments */}\n            <div className=\"flex flex-col gap-1.5\">\n              <Label>Attachments</Label>\n              <input\n                type=\"file\"\n                accept=\"image/*,.pdf,application/pdf\"\n                multiple\n                className=\"text-sm file:mr-3 file:rounded-md file:border-0 file:bg-primary file:px-3 file:py-1.5 file:text-sm file:font-medium file:text-primary-foreground hover:file:bg-primary/90\"\n                onChange={(e) => {\n                  const files = Array.from(e.target.files ?? []);\n                  const valid = files.filter((f) => {\n                    if (f.size > MAX_FILE_SIZE) {\n                      setError(`\"${f.name}\" exceeds 5 MB limit`);\n                      return false;\n                    }\n                    return true;\n                  });\n                  setPendingFiles((prev) => [...prev, ...valid]);\n                  e.target.value = \"\";\n                }}\n              />\n\n              {/* Existing attachments */}\n              {existingAttachments\n                .filter(\n                  (a) => !attachmentsToDelete.some((d) => d.path === a.path),\n                )\n                .map((att) => (\n                  <div\n                    key={att.path}\n                    className=\"flex items-center gap-2 rounded-md border px-3 py-1.5 text-sm\"\n                  >\n                    <Paperclip className=\"h-3.5 w-3.5 shrink-0 text-muted-foreground\" />\n                    <span className=\"truncate\">{att.name}</span>\n                    <span className=\"ml-auto text-muted-foreground\">\n                      {(att.size / 1024).toFixed(0)} KB\n                    </span>\n                    <button\n                      type=\"button\"\n                      className=\"text-destructive hover:text-destructive/80\"\n                      onClick={() =>\n                        setAttachmentsToDelete((prev) => [...prev, att])\n                      }\n                    >\n                      <X className=\"h-3.5 w-3.5\" />\n                    </button>\n                  </div>\n                ))}\n\n              {/* Pending files */}\n              {pendingFiles.map((file, idx) => (\n                <div\n                  key={`pending-${idx}`}\n                  className=\"flex items-center gap-2 rounded-md border border-dashed px-3 py-1.5 text-sm\"\n                >\n                  <Paperclip className=\"h-3.5 w-3.5 shrink-0 text-muted-foreground\" />\n                  <span className=\"truncate\">{file.name}</span>\n                  <span className=\"ml-auto text-muted-foreground\">\n                    {(file.size / 1024).toFixed(0)} KB\n                  </span>\n                  <button\n                    type=\"button\"\n                    className=\"text-destructive hover:text-destructive/80\"\n                    onClick={() =>\n                      setPendingFiles((prev) =>\n                        prev.filter((_, i) => i !== idx),\n                      )\n                    }\n                  >\n                    <X className=\"h-3.5 w-3.5\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSave}\n              disabled={saving || !form.description.trim()}\n            >\n              {saving\n                ? \"Saving...\"\n                : editingId\n                  ? \"Save Changes\"\n                  : \"Add Payable\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7022, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/grand-total-section.tsx"],"sourcesContent":["\nimport { useState, useEffect } from \"react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { fetchTimeEntries, fetchSubscriptions, fetchPayables } from \"@/lib/supabase\"\nimport { useAuth } from \"@/lib/auth-context\"\n\nfunction formatCurrency(n: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2,\n  }).format(n)\n}\n\nexport function GrandTotalSection({ clientId = \"cygnet\", hourlyRate = null, flatRate = null, refreshKey = 0, hidePayables = false }: { clientId?: string; hourlyRate?: number | null; flatRate?: number | null; refreshKey?: number; hidePayables?: boolean }) {\n  const { supabase } = useAuth()\n  const HOURLY_RATE = hourlyRate\n  const FLAT_RATE = flatRate\n  const [timeCost, setTimeCost] = useState<number | null>(0)\n  const [subscriptionMonthly, setSubscriptionMonthly] = useState(0)\n  const [payablesPaid, setPayablesPaid] = useState(0)\n  const [loaded, setLoaded] = useState(false)\n\n  useEffect(() => {\n    let cancelled = false\n    setLoaded(false)\n\n    async function load() {\n      try {\n        const [entries, subs, payables] = await Promise.all([\n          fetchTimeEntries(supabase, clientId),\n          fetchSubscriptions(supabase, clientId),\n          fetchPayables(supabase, clientId),\n        ])\n        if (cancelled) return\n\n        const noData = entries.length === 0 && subs.length === 0 && payables.length === 0\n\n        const totalHours = entries.reduce((sum, e) => sum + e.totalHours, 0)\n        setTimeCost(noData ? null : FLAT_RATE != null ? FLAT_RATE : HOURLY_RATE != null ? totalHours * HOURLY_RATE : null)\n\n        const monthly = subs.reduce((sum, s) => {\n          if (s.billingCycle === \"monthly\") return sum + s.amount\n          return sum + s.amount / 12\n        }, 0)\n        setSubscriptionMonthly(monthly)\n\n        const payablesTotal = payables.reduce((sum, p) => sum + p.amount, 0)\n        setPayablesPaid(payablesTotal)\n      } catch {\n        // Sections already show their own errors\n      } finally {\n        if (!cancelled) setLoaded(true)\n      }\n    }\n\n    load()\n    return () => { cancelled = true }\n  }, [clientId, supabase, refreshKey])\n\n  if (!loaded) return null\n\n  const hasData = timeCost !== null || subscriptionMonthly > 0 || payablesPaid > 0\n  if (!hasData) return null\n\n  const subscriptionAnnual = subscriptionMonthly * 12\n  const isNextier = clientId === \"nextier\"\n  const effectivePayables = hidePayables ? 0 : payablesPaid\n  const subtotal = timeCost != null ? timeCost + subscriptionAnnual : null\n  const grandTotal = isNextier\n    ? effectivePayables\n    : subtotal != null ? subtotal - effectivePayables : null\n\n  return (\n    <Card className=\"ml-auto sm:max-w-[50%]\">\n      <CardHeader>\n        <CardTitle>Grand Total</CardTitle>\n      </CardHeader>\n      <CardContent>\n          <div className=\"flex justify-end\">\n            <div className=\"flex flex-col items-end\">\n              <div className=\"flex flex-col gap-0.5 items-end text-muted-foreground\">\n                {(timeCost == null || timeCost > 0) && (\n                  <div className=\"flex items-baseline gap-2\">\n                    <span>Time Tracking</span>\n                    <span className=\"font-mono\">{timeCost != null ? formatCurrency(timeCost) : \"TBD\"}</span>\n                  </div>\n                )}\n                {subscriptionAnnual > 0 && (\n                  <div className=\"flex items-baseline gap-2\">\n                    <span>Subscriptions</span>\n                    <span className=\"font-mono\">{formatCurrency(subscriptionAnnual)}</span>\n                  </div>\n                )}\n                {!hidePayables && payablesPaid > 0 && (\n                  <div className=\"flex items-baseline gap-2\">\n                    <span>{clientId === \"nextier\" ? \"Proceeds\" : \"Payables\"}</span>\n                    <span className=\"font-mono\">{clientId === \"nextier\" ? \"\" : \"\\u2212\"}{formatCurrency(payablesPaid)}</span>\n                  </div>\n                )}\n              </div>\n              <div className=\"mt-1 border-t border-border pt-1 w-full text-right\">\n                <span className=\"font-mono font-bold text-primary\">{grandTotal != null ? formatCurrency(grandTotal) : \"TBD\"}</span>\n              </div>\n            </div>\n          </div>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7243, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/tabs.tsx"],"sourcesContent":["\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      'inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground',\n      className,\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm',\n      className,\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      'mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',\n      className,\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 7297, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/ui/checkbox.tsx"],"sourcesContent":["\nimport * as React from 'react'\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox'\nimport { Check } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      'peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground',\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn('flex items-center justify-center text-current')}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAW,IAAA,yHAAE,EAAC;sBAEd,cAAA,8OAAC,6MAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 7340, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/dashboard-footer.tsx"],"sourcesContent":["\nimport { useTheme } from \"next-themes\"\nimport { useEffect, useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Moon, Sun } from \"lucide-react\"\n\nexport function DashboardFooter({ children }: { children?: React.ReactNode }) {\n  const { resolvedTheme, setTheme } = useTheme()\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  return (\n    <footer className=\"relative border-t border-border bg-card py-4 text-center text-xs text-muted-foreground print:hidden\">\n      Melkonian Industries LLC\n      <br />\n      Email <a href=\"mailto:davemelk@gmail.com\" className=\"underline hover:text-foreground\">davemelk@gmail.com</a> with any concerns.\n      <div className=\"absolute left-4 top-1/2 -translate-y-1/2\">\n        {mounted && (\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-6 w-6\"\n            onClick={() => setTheme(resolvedTheme === \"dark\" ? \"light\" : \"dark\")}\n            aria-label=\"Toggle theme\"\n          >\n            {resolvedTheme === \"dark\" ? (\n              <Sun className=\"h-3.5 w-3.5\" />\n            ) : (\n              <Moon className=\"h-3.5 w-3.5\" />\n            )}\n          </Button>\n        )}\n      </div>\n      {children}\n    </footer>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAAA;;;;;;AAEO,SAAS,gBAAgB,EAAE,QAAQ,EAAkC;IAC1E,MAAM,EAAE,aAAa,EAAE,QAAQ,EAAE,GAAG,IAAA,4JAAQ;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAO,WAAU;;YAAsG;0BAEtH,8OAAC;;;;;YAAK;0BACA,8OAAC;gBAAE,MAAK;gBAA4B,WAAU;0BAAkC;;;;;;YAAsB;0BAC5G,8OAAC;gBAAI,WAAU;0BACZ,yBACC,8OAAC,4IAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAU;oBACV,SAAS,IAAM,SAAS,kBAAkB,SAAS,UAAU;oBAC7D,cAAW;8BAEV,kBAAkB,uBACjB,8OAAC,uMAAG;wBAAC,WAAU;;;;;6CAEf,8OAAC,0MAAI;wBAAC,WAAU;;;;;;;;;;;;;;;;YAKvB;;;;;;;AAGP"}},
    {"offset": {"line": 7424, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/src/components/archived-invoice-view.tsx"],"sourcesContent":["\nimport { useState, useEffect } from \"react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableFooter,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\"\nimport { Pencil, ExternalLink } from \"lucide-react\"\nimport type { Invoice, TimeEntry, Subscription, Payable, Link } from \"@/lib/project-data\"\nimport {\n  fetchTimeEntriesByInvoice,\n  fetchSubscriptionsByInvoice,\n  fetchPayablesByInvoice,\n  updateInvoice,\n} from \"@/lib/supabase\"\nimport { useAuth } from \"@/lib/auth-context\"\n\nfunction formatCurrency(n: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2,\n  }).format(n)\n}\n\nexport function ArchivedInvoiceView({ invoice, onInvoiceUpdate }: { invoice: Invoice; onInvoiceUpdate?: (updated: Invoice) => void }) {\n  const { supabase } = useAuth()\n  const [entries, setEntries] = useState<TimeEntry[]>([])\n  const [subs, setSubs] = useState<Subscription[]>([])\n  const [payables, setPayables] = useState<Payable[]>([])\n  const [loaded, setLoaded] = useState(false)\n  const [rateDialogOpen, setRateDialogOpen] = useState(false)\n  const [viewLinksData, setViewLinksData] = useState<Link[]>([])\n  const [viewLinksOpen, setViewLinksOpen] = useState(false)\n  const [rateHourly, setRateHourly] = useState(\"\")\n  const [rateFlat, setRateFlat] = useState(\"\")\n  const [rateSaving, setRateSaving] = useState(false)\n\n  useEffect(() => {\n    let cancelled = false\n\n    async function load() {\n      try {\n        const [e, s, p] = await Promise.all([\n          fetchTimeEntriesByInvoice(supabase, invoice.id),\n          fetchSubscriptionsByInvoice(supabase, invoice.id),\n          fetchPayablesByInvoice(supabase, invoice.id),\n        ])\n        if (cancelled) return\n        setEntries(e)\n        setSubs(s)\n        setPayables(p)\n      } catch {\n        // silent\n      } finally {\n        if (!cancelled) setLoaded(true)\n      }\n    }\n\n    load()\n    return () => { cancelled = true }\n  }, [invoice.id, supabase])\n\n  if (!loaded) {\n    return (\n      <Card>\n        <CardContent className=\"p-8 text-center text-muted-foreground\">\n          Loading archived invoice...\n        </CardContent>\n      </Card>\n    )\n  }\n\n  const totalHours = entries.reduce((sum, e) => sum + e.totalHours, 0)\n\n  function fmtDate(s: string) { const d = new Date(s + \"T00:00:00\"); return `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`; }\n  const periodLabel = invoice.periodStart && invoice.periodEnd\n    ? `${fmtDate(invoice.periodStart)} - ${fmtDate(invoice.periodEnd)}`\n    : \"N/A\"\n\n  return (\n    <div className=\"flex flex-col gap-6\">\n      {/* Invoice Summary */}\n      <Card>\n        <CardHeader>\n          <CardTitle>{invoice.invoiceNumber}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-5 text-sm\">\n            <div>\n              <span className=\"text-muted-foreground\">Period</span>\n              <p className=\"font-medium\">{periodLabel}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Hourly Rate</span>\n              <p className=\"font-mono font-medium\">\n                {totalHours > 0\n                  ? `${formatCurrency(invoice.totalTime / totalHours)}/hr`\n                  : \"\\u2014\"}\n              </p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Time</span>\n              <div className=\"flex items-center gap-1\">\n                <p className=\"font-mono font-medium\">{formatCurrency(invoice.totalTime)}</p>\n                {onInvoiceUpdate && (\n                  <button\n                    className=\"text-muted-foreground hover:text-primary\"\n                    onClick={() => {\n                      setRateHourly(\"\")\n                      setRateFlat(\"\")\n                      setRateDialogOpen(true)\n                    }}\n                    aria-label=\"Edit rate\"\n                  >\n                    <Pencil className=\"h-3.5 w-3.5\" />\n                  </button>\n                )}\n              </div>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Subscriptions</span>\n              <p className=\"font-mono font-medium\">{formatCurrency(invoice.totalSubscriptions)}</p>\n            </div>\n            <div>\n              <span className=\"text-muted-foreground\">Payables</span>\n              <p className=\"font-mono font-medium\">{formatCurrency(invoice.totalPayables)}</p>\n            </div>\n          </div>\n          {invoice.notes && (\n            <p className=\"mt-3 text-sm text-muted-foreground\">{invoice.notes}</p>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Archived Time Entries */}\n      {entries.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Time Tracking</CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"w-[110px]\">Date</TableHead>\n                    <TableHead>Tasks</TableHead>\n                    <TableHead>Notes</TableHead>\n                    <TableHead>Time Range</TableHead>\n                    <TableHead className=\"w-[80px] text-right\">Hours</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {entries.map((entry) => (\n                    <TableRow key={entry.id}>\n                      <TableCell className=\"whitespace-nowrap font-medium\">\n                        {fmtDate(entry.date)}\n                      </TableCell>\n                      <TableCell className=\"max-w-[220px] text-muted-foreground\">{entry.tasks}</TableCell>\n                      <TableCell className=\"max-w-[160px] text-muted-foreground\">{entry.notes || \"\\u2014\"}</TableCell>\n                      <TableCell className=\"whitespace-nowrap\">{entry.timeRange}</TableCell>\n                      <TableCell className=\"text-right font-mono\">\n                        <span className=\"inline-flex items-center gap-1\">\n                          {entry.totalHours.toFixed(2)}\n                          {entry.links && entry.links.length > 0 && (\n                            <button\n                              className=\"text-muted-foreground hover:text-primary\"\n                              onClick={() => { setViewLinksData(entry.links!); setViewLinksOpen(true); }}\n                              aria-label=\"View links\"\n                            >\n                              <ExternalLink className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                        </span>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n                <TableFooter>\n                  <TableRow>\n                    <TableCell colSpan={4} className=\"font-semibold\">Total</TableCell>\n                    <TableCell className=\"text-right font-mono font-semibold\">\n                      {entries.reduce((sum, e) => sum + e.totalHours, 0).toFixed(2)}\n                    </TableCell>\n                  </TableRow>\n                </TableFooter>\n              </Table>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Archived Subscriptions */}\n      {subs.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Software Subscriptions</CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Name</TableHead>\n                    <TableHead>Category</TableHead>\n                    <TableHead className=\"w-[110px]\">Billing Cycle</TableHead>\n                    <TableHead className=\"w-[110px]\">Renewal Date</TableHead>\n                    <TableHead>Notes</TableHead>\n                    <TableHead className=\"w-[100px] text-right\">Amount</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {subs.map((sub) => (\n                    <TableRow key={sub.id}>\n                      <TableCell className=\"font-medium\">{sub.name}</TableCell>\n                      <TableCell className=\"text-muted-foreground\">{sub.category}</TableCell>\n                      <TableCell className=\"capitalize\">{sub.billingCycle}</TableCell>\n                      <TableCell className=\"text-muted-foreground\">\n                        {sub.renewalDate ? fmtDate(sub.renewalDate) : \"\\u2014\"}\n                      </TableCell>\n                      <TableCell className=\"max-w-[160px] text-muted-foreground\">{sub.notes || \"\\u2014\"}</TableCell>\n                      <TableCell className=\"text-right font-mono\">\n                        <span className=\"inline-flex items-center gap-1\">\n                          {formatCurrency(sub.amount)}\n                          <span className=\"text-muted-foreground\">\n                            /{sub.billingCycle === \"monthly\" ? \"mo\" : \"yr\"}\n                          </span>\n                          {sub.links && sub.links.length > 0 && (\n                            <button\n                              className=\"text-muted-foreground hover:text-primary\"\n                              onClick={() => { setViewLinksData(sub.links!); setViewLinksOpen(true); }}\n                              aria-label=\"View links\"\n                            >\n                              <ExternalLink className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                        </span>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Archived Payables */}\n      {payables.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>{invoice.clientId === \"nextier\" ? \"Nextier Proceeds\" : \"Payables\"}</CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"w-[110px]\">Date</TableHead>\n                    <TableHead>Description</TableHead>\n                    <TableHead className=\"w-[100px] text-right\">Amount</TableHead>\n                    <TableHead>Notes</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {payables.map((p) => (\n                    <TableRow key={p.id}>\n                      <TableCell className=\"text-muted-foreground\">\n                        {p.date ? fmtDate(p.date) : \"\\u2014\"}\n                      </TableCell>\n                      <TableCell className=\"font-medium\">{p.description}</TableCell>\n                      <TableCell className=\"text-right font-mono\">\n                        <span className=\"inline-flex items-center gap-1\">\n                          {formatCurrency(p.amount)}\n                          {p.links && p.links.length > 0 && (\n                            <button\n                              className=\"text-muted-foreground hover:text-primary\"\n                              onClick={() => { setViewLinksData(p.links!); setViewLinksOpen(true); }}\n                              aria-label=\"View links\"\n                            >\n                              <ExternalLink className=\"h-3.5 w-3.5\" />\n                            </button>\n                          )}\n                        </span>\n                      </TableCell>\n                      <TableCell className=\"max-w-[160px] text-muted-foreground\">{p.notes || \"\\u2014\"}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n                <TableFooter>\n                  <TableRow>\n                    <TableCell colSpan={2} className=\"font-semibold\">Total</TableCell>\n                    <TableCell className=\"text-right font-mono font-semibold text-primary\">\n                      {formatCurrency(payables.reduce((sum, p) => sum + p.amount, 0))}\n                    </TableCell>\n                    <TableCell />\n                  </TableRow>\n                </TableFooter>\n              </Table>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Grand Total (snapshot) */}\n      <Card className=\"ml-auto sm:max-w-[50%]\">\n        <CardHeader>\n          <CardTitle>Grand Total</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex justify-end\">\n            <div className=\"flex flex-col items-end\">\n              <div className=\"flex flex-col gap-0.5 items-end text-muted-foreground\">\n                {(invoice.totalTime > 0 || invoice.totalTime === 0) && entries.length > 0 && (\n                  <div className=\"flex items-baseline gap-2\">\n                    <span>Time Tracking</span>\n                    <span className=\"font-mono\">{formatCurrency(invoice.totalTime)}</span>\n                  </div>\n                )}\n                {invoice.totalSubscriptions > 0 && (\n                  <div className=\"flex items-baseline gap-2\">\n                    <span>Subscriptions</span>\n                    <span className=\"font-mono\">{formatCurrency(invoice.totalSubscriptions)}</span>\n                  </div>\n                )}\n                {invoice.totalPayables > 0 && (\n                  <div className=\"flex items-baseline gap-2\">\n                    <span>{invoice.clientId === \"nextier\" ? \"Proceeds\" : \"Payables\"}</span>\n                    <span className=\"font-mono\">{invoice.clientId === \"nextier\" ? \"\" : \"\\u2212\"}{formatCurrency(invoice.totalPayables)}</span>\n                  </div>\n                )}\n              </div>\n              <div className=\"mt-1 border-t border-border pt-1 w-full text-right\">\n                <span className=\"font-mono font-bold text-primary\">{formatCurrency(invoice.grandTotal)}</span>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* View Links Dialog */}\n      <Dialog open={viewLinksOpen} onOpenChange={setViewLinksOpen}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Links</DialogTitle>\n            <DialogDescription>{viewLinksData.length} link(s)</DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-2\">\n            {viewLinksData.map((link, idx) => (\n              <a key={idx} href={link.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2 text-sm text-primary hover:underline\">\n                <ExternalLink className=\"h-3.5 w-3.5 shrink-0\" />\n                {link.label || link.url}\n              </a>\n            ))}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setViewLinksOpen(false)}>Close</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Rate Dialog */}\n      {onInvoiceUpdate && (\n        <Dialog open={rateDialogOpen} onOpenChange={setRateDialogOpen}>\n          <DialogContent className=\"sm:max-w-sm\">\n            <DialogHeader>\n              <DialogTitle>Update Rate</DialogTitle>\n              <DialogDescription>\n                Set an hourly rate or flat rate to recalculate the time cost for this invoice.\n                Total hours: {totalHours.toFixed(2)}\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div className=\"flex flex-col gap-1.5\">\n                  <Label htmlFor=\"rate-hourly\">Hourly Rate</Label>\n                  <Input\n                    id=\"rate-hourly\"\n                    type=\"number\"\n                    placeholder=\"e.g. 75\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={rateHourly}\n                    onChange={(e) => setRateHourly(e.target.value)}\n                    disabled={!!rateFlat.trim()}\n                  />\n                </div>\n                <div className=\"flex flex-col gap-1.5\">\n                  <Label htmlFor=\"rate-flat\">Flat Rate</Label>\n                  <Input\n                    id=\"rate-flat\"\n                    type=\"number\"\n                    placeholder=\"e.g. 5000\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={rateFlat}\n                    onChange={(e) => setRateFlat(e.target.value)}\n                    disabled={!!rateHourly.trim()}\n                  />\n                </div>\n              </div>\n              {(rateHourly.trim() || rateFlat.trim()) && (\n                <p className=\"text-sm text-muted-foreground\">\n                  New time cost: {formatCurrency(\n                    rateFlat.trim()\n                      ? Number(rateFlat)\n                      : totalHours * Number(rateHourly)\n                  )}\n                </p>\n              )}\n            </div>\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setRateDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button\n                disabled={rateSaving || (!rateHourly.trim() && !rateFlat.trim())}\n                onClick={async () => {\n                  setRateSaving(true)\n                  try {\n                    const newTimeCost = rateFlat.trim()\n                      ? Math.round(Number(rateFlat) * 100) / 100\n                      : Math.round(totalHours * Number(rateHourly) * 100) / 100\n\n                    const isNextier = invoice.clientId === \"nextier\"\n                    const newGrandTotal = isNextier\n                      ? invoice.totalPayables\n                      : Math.round((newTimeCost + invoice.totalSubscriptions - invoice.totalPayables) * 100) / 100\n\n                    const updated = await updateInvoice(supabase, invoice.id, {\n                      total_time: newTimeCost,\n                      grand_total: newGrandTotal,\n                    })\n                    onInvoiceUpdate(updated)\n                    setRateDialogOpen(false)\n                  } catch {\n                    // silent\n                  } finally {\n                    setRateSaving(false)\n                  }\n                }}\n              >\n                {rateSaving ? \"Saving...\" : \"Update Rate\"}\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8738, "column": 0}, "map": {"version":3,"sources":["file:///Users/davemelkonian/Movies/repos/time-trackings/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { DashboardHeader } from \"@/components/dashboard-header\"\nimport { TimeTrackingSection } from \"@/components/time-tracking-section\"\nimport { SubscriptionsSection } from \"@/components/subscriptions-section\"\nimport { PayablesSection } from \"@/components/payables-section\"\nimport { GrandTotalSection } from \"@/components/grand-total-section\"\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\"\nimport { Plus, Archive, CalendarCheck, X } from \"lucide-react\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { DashboardFooter } from \"@/components/dashboard-footer\"\nimport { ArchivedInvoiceView } from \"@/components/archived-invoice-view\"\nimport { type Client, type Invoice, defaultClients } from \"@/lib/project-data\"\nimport { fetchClients, insertClient, fetchInvoices, createInvoice, updateClientBillingPeriodStart, updateClientBillingPeriodEnd, updateClientRate } from \"@/lib/supabase\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\n\n\nexport default function Page() {\n  const { supabase } = useAuth()\n  const [clients, setClients] = useState<Client[]>([])\n  const [activeClientId, setActiveClientId] = useState(\"\")\n  const [mounted, setMounted] = useState(false)\n\n  // Add Client dialog state\n  const [addDialogOpen, setAddDialogOpen] = useState(false)\n  const [newName, setNewName] = useState(\"\")\n  const [newRate, setNewRate] = useState(\"\")\n  const [newFlatRate, setNewFlatRate] = useState(\"\")\n  const [saving, setSaving] = useState(false)\n  const [addError, setAddError] = useState<string | null>(null)\n  const [payablesKey, setPayablesKey] = useState(0)\n  const [refreshKey, setRefreshKey] = useState(0)\n\n  // Invoice / archive state\n  const [invoices, setInvoices] = useState<Invoice[]>([])\n  const [selectedPeriod, setSelectedPeriod] = useState<string>(\"current\")\n  const [archiveDialogOpen, setArchiveDialogOpen] = useState(false)\n  const [archiveCopySubs, setArchiveCopySubs] = useState(false)\n  const [archiveNotes, setArchiveNotes] = useState(\"\")\n  const [archiving, setArchiving] = useState(false)\n  const [archiveHourlyRate, setArchiveHourlyRate] = useState(\"\")\n  const [archiveFlatRate, setArchiveFlatRate] = useState(\"\")\n  const [archiveRateTbd, setArchiveRateTbd] = useState(false)\n\n  // Fetch clients from Supabase on mount\n  useEffect(() => {\n    let cancelled = false\n\n    async function load() {\n      try {\n        let rows = await fetchClients(supabase)\n        if (cancelled) return\n\n        // Seed from defaults if table is empty\n        if (rows.length === 0) {\n          for (const c of defaultClients) {\n            await insertClient(supabase, { id: c.id, name: c.name, hourlyRate: c.hourlyRate, flatRate: c.flatRate })\n          }\n          rows = await fetchClients(supabase)\n          if (cancelled) return\n        }\n\n        setClients(rows)\n        if (!cancelled && rows.length > 0) {\n          setActiveClientId((prev) => prev || rows[0].id)\n        }\n      } catch {\n        // Fallback to hardcoded defaults\n        setClients(defaultClients)\n        setActiveClientId((prev) => prev || defaultClients[0].id)\n      } finally {\n        if (!cancelled) setMounted(true)\n      }\n    }\n\n    load()\n    return () => { cancelled = true }\n  }, [supabase])\n\n  // Fetch invoices when active client changes\n  useEffect(() => {\n    if (!activeClientId) return\n    let cancelled = false\n\n    async function loadInvoices() {\n      try {\n        const inv = await fetchInvoices(supabase, activeClientId)\n        if (!cancelled) {\n          setInvoices(inv)\n          setSelectedPeriod(\"current\")\n        }\n      } catch {\n        if (!cancelled) setInvoices([])\n      }\n    }\n\n    loadInvoices()\n    return () => { cancelled = true }\n  }, [activeClientId, supabase, refreshKey])\n\n  const activeClient = clients.find((c) => c.id === activeClientId) ?? clients[0]\n  const selectedInvoice = selectedPeriod !== \"current\"\n    ? invoices.find((inv) => inv.id === selectedPeriod) ?? null\n    : null\n\n  async function handleArchive() {\n    if (!activeClient) return\n    setArchiving(true)\n    try {\n      const hourlyOverride = archiveRateTbd ? undefined : (archiveHourlyRate.trim() ? Number(archiveHourlyRate) : undefined)\n      const flatOverride = archiveRateTbd ? undefined : (archiveFlatRate.trim() ? Number(archiveFlatRate) : undefined)\n      await createInvoice(supabase, activeClient.id, {\n        copySubscriptionsForward: archiveCopySubs,\n        notes: archiveNotes,\n        hourlyRateOverride: hourlyOverride,\n        flatRateOverride: flatOverride,\n        rateTbd: archiveRateTbd,\n      })\n      setArchiveDialogOpen(false)\n      setArchiveNotes(\"\")\n      setArchiveCopySubs(false)\n      setArchiveHourlyRate(\"\")\n      setArchiveFlatRate(\"\")\n      setArchiveRateTbd(false)\n      const rows = await fetchClients(supabase)\n      setClients(rows)\n      setRefreshKey((k) => k + 1)\n      setPayablesKey((k) => k + 1)\n      setSelectedPeriod(\"current\")\n    } catch (err) {\n      setAddError(err instanceof Error ? err.message : \"Failed to create invoice\")\n    } finally {\n      setArchiving(false)\n    }\n  }\n\n  async function handleAddClient() {\n    if (!newName.trim()) return\n    setSaving(true)\n    setAddError(null)\n\n    const id = newName.trim().toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\")\n    const hourlyRate = newRate.trim() ? Number(newRate) : null\n    const flatRate = newFlatRate.trim() ? Number(newFlatRate) : null\n\n    try {\n      await insertClient(supabase, { id, name: newName.trim(), hourlyRate, flatRate })\n      const rows = await fetchClients(supabase)\n      setClients(rows)\n      setActiveClientId(id)\n      setAddDialogOpen(false)\n      setNewName(\"\")\n      setNewRate(\"\")\n      setNewFlatRate(\"\")\n      setAddError(null)\n    } catch (err) {\n      setAddError(err instanceof Error ? err.message : \"Failed to add client\")\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (!mounted) {\n    return (\n      <div className=\"flex min-h-screen flex-col\">\n        <DashboardHeader clientName=\"Admin\" />\n        <main className=\"mx-auto w-full max-w-7xl flex-1 px-4 py-6 sm:px-6 lg:px-8 flex items-center justify-center text-muted-foreground\">\n          Loading...\n        </main>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex min-h-screen flex-col\">\n      <DashboardHeader clientName=\"Admin\" />\n      <main className=\"mx-auto w-full max-w-7xl flex-1 px-4 py-6 sm:px-6 lg:px-8 flex flex-col gap-8\">\n        <div className=\"flex flex-wrap items-center justify-between gap-3\">\n          <div className=\"flex flex-col gap-1.5 print:hidden overflow-x-auto\">\n            <Label className=\"text-xs text-muted-foreground\">Clients</Label>\n            <div className=\"flex items-center gap-2\">\n            <Tabs value={activeClientId} onValueChange={setActiveClientId}>\n              <TabsList className=\"flex-wrap h-auto\">\n                {clients.map((client) => (\n                  <TabsTrigger key={client.id} value={client.id}>\n                    {client.name}\n                  </TabsTrigger>\n                ))}\n              </TabsList>\n            </Tabs>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              className=\"h-8 w-8 shrink-0\"\n              onClick={() => setAddDialogOpen(true)}\n              aria-label=\"Add client\"\n            >\n              <Plus className=\"h-4 w-4\" />\n            </Button>\n            </div>\n          </div>\n          <span className=\"hidden print:block text-lg font-semibold\">{activeClient?.name}</span>\n          <div className=\"flex flex-col gap-1.5 print:hidden\">\n            <Label className=\"text-xs text-muted-foreground\">Actions</Label>\n            <div className=\"flex items-center gap-2\">\n            {selectedPeriod === \"current\" && activeClient && !activeClient.billingPeriodStart && (\n              <Button\n                variant=\"default\"\n                size=\"sm\"\n                className=\"gap-1.5 shrink-0\"\n                onClick={async () => {\n                  const today = new Date().toISOString().slice(0, 10)\n                  await updateClientBillingPeriodStart(supabase, activeClient.id, today)\n                  const rows = await fetchClients(supabase)\n                  setClients(rows)\n                }}\n              >\n                <Plus className=\"h-4 w-4\" />\n                New Invoice\n              </Button>\n            )}\n            {selectedPeriod === \"current\" && activeClient?.billingPeriodStart && (\n              <>\n                {activeClient.billingPeriodEnd ? (\n                  <div className=\"flex items-center gap-1.5 rounded-md border bg-muted px-3 py-1.5 text-sm\">\n                    <CalendarCheck className=\"h-4 w-4 text-muted-foreground\" />\n                    <span>Period ends {(() => { const d = new Date(activeClient.billingPeriodEnd + \"T00:00:00\"); return `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`; })()}</span>\n                    <button\n                      className=\"ml-1 rounded-full p-0.5 hover:bg-background\"\n                      onClick={async () => {\n                        await updateClientBillingPeriodEnd(supabase, activeClient.id, null)\n                        const rows = await fetchClients(supabase)\n                        setClients(rows)\n                      }}\n                      aria-label=\"Clear billing period end\"\n                    >\n                      <X className=\"h-3.5 w-3.5\" />\n                    </button>\n                  </div>\n                ) : (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"gap-1.5 shrink-0\"\n                    onClick={async () => {\n                      const today = new Date().toISOString().slice(0, 10)\n                      await updateClientBillingPeriodEnd(supabase, activeClient.id, today)\n                      const rows = await fetchClients(supabase)\n                      setClients(rows)\n                    }}\n                  >\n                    <CalendarCheck className=\"h-4 w-4\" />\n                    End Billing Period\n                  </Button>\n                )}\n                <Button onClick={() => { setArchiveHourlyRate(activeClient?.hourlyRate != null ? String(activeClient.hourlyRate) : \"\"); setArchiveFlatRate(activeClient?.flatRate != null ? String(activeClient.flatRate) : \"\"); setArchiveDialogOpen(true); }} variant=\"default\" size=\"sm\" className=\"gap-1.5 shrink-0\">\n                  <Archive className=\"h-4 w-4\" />\n                  Create Invoice\n                </Button>\n              </>\n            )}\n            </div>\n          </div>\n        </div>\n        {activeClient && invoices.length > 0 && (\n          <div className=\"flex items-center gap-3 print:hidden\">\n            <Select value={selectedPeriod} onValueChange={setSelectedPeriod}>\n              <SelectTrigger className=\"w-[280px]\">\n                <SelectValue placeholder=\"Select period\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"current\">Current Period</SelectItem>\n                {invoices.map((inv) => (\n                  <SelectItem key={inv.id} value={inv.id}>\n                    {inv.invoiceNumber} ({inv.periodStart && inv.periodEnd\n                      ? `${(() => { const d = new Date(inv.periodStart + \"T00:00:00\"); return `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`; })()} - ${(() => { const d = new Date(inv.periodEnd + \"T00:00:00\"); return `${String(d.getMonth() + 1).padStart(2, \"0\")}/${String(d.getDate()).padStart(2, \"0\")}/${d.getFullYear()}`; })()}`\n                      : \"N/A\"})\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        )}\n        {activeClient && selectedInvoice ? (\n          <ArchivedInvoiceView invoice={selectedInvoice} onInvoiceUpdate={(updated) => setInvoices((prev) => prev.map((inv) => inv.id === updated.id ? updated : inv))} />\n        ) : activeClient?.billingPeriodStart || activeClient?.id === \"nextier\" ? (\n          <>\n            {activeClient.id !== \"nextier\" && (\n              <>\n                <TimeTrackingSection editMode clientId={activeClient.id} hourlyRate={activeClient.hourlyRate} flatRate={activeClient.flatRate} refreshKey={refreshKey} billingPeriodEnd={activeClient.billingPeriodEnd} onRateChange={async (newHourly, newFlat) => {\n                  await updateClientRate(supabase, activeClient.id, newHourly, newFlat)\n                  const rows = await fetchClients(supabase)\n                  setClients(rows)\n                  setPayablesKey((k) => k + 1)\n                }} />\n                <SubscriptionsSection editMode clientId={activeClient.id} refreshKey={refreshKey} />\n              </>\n            )}\n            <PayablesSection editMode clientId={activeClient.id} hourlyRate={activeClient.hourlyRate} flatRate={activeClient.flatRate} onPayablesChange={() => setPayablesKey((k) => k + 1)} />\n            <GrandTotalSection clientId={activeClient.id} hourlyRate={activeClient.hourlyRate} flatRate={activeClient.flatRate} refreshKey={payablesKey + refreshKey} />\n          </>\n        ) : null}\n      </main>\n      <DashboardFooter />\n\n      {/* Archive / New Invoice Dialog */}\n      <Dialog open={archiveDialogOpen} onOpenChange={setArchiveDialogOpen}>\n        <DialogContent className=\"sm:max-w-sm\">\n          <DialogHeader>\n            <DialogTitle>Create Invoice</DialogTitle>\n            <DialogDescription>\n              Archive the current period data into a new invoice. All current entries, subscriptions, and payables will be stamped to this invoice.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <Checkbox\n                id=\"copy-subs\"\n                checked={archiveCopySubs}\n                onCheckedChange={(checked) => setArchiveCopySubs(checked === true)}\n              />\n              <Label htmlFor=\"copy-subs\">Copy subscriptions to new period</Label>\n            </div>\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"archive-notes\">Notes</Label>\n              <Textarea\n                id=\"archive-notes\"\n                placeholder=\"Optional invoice notes...\"\n                rows={3}\n                value={archiveNotes}\n                onChange={(e) => setArchiveNotes(e.target.value)}\n              />\n            </div>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"archive-hourly-rate\">Hourly Rate</Label>\n                <Input\n                  id=\"archive-hourly-rate\"\n                  type=\"number\"\n                  placeholder=\"e.g. 75\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={archiveHourlyRate}\n                  onChange={(e) => setArchiveHourlyRate(e.target.value)}\n                  disabled={archiveRateTbd || !!archiveFlatRate.trim()}\n                />\n              </div>\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"archive-flat-rate\">Flat Rate</Label>\n                <Input\n                  id=\"archive-flat-rate\"\n                  type=\"number\"\n                  placeholder=\"e.g. 5000\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={archiveFlatRate}\n                  onChange={(e) => setArchiveFlatRate(e.target.value)}\n                  disabled={archiveRateTbd || !!archiveHourlyRate.trim()}\n                />\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Checkbox\n                id=\"rate-tbd\"\n                checked={archiveRateTbd}\n                onCheckedChange={(checked) => {\n                  const tbd = checked === true\n                  setArchiveRateTbd(tbd)\n                  if (tbd) {\n                    setArchiveHourlyRate(\"\")\n                    setArchiveFlatRate(\"\")\n                  }\n                }}\n              />\n              <Label htmlFor=\"rate-tbd\">Rate TBD</Label>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Set either an hourly rate or a flat rate, not both. Check &quot;Rate TBD&quot; to skip rate for now.</p>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setArchiveDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button onClick={handleArchive} disabled={archiving}>\n              {archiving ? \"Creating...\" : \"Create Invoice\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Add Client Dialog */}\n      <Dialog open={addDialogOpen} onOpenChange={setAddDialogOpen}>\n        <DialogContent className=\"sm:max-w-sm\">\n          <DialogHeader>\n            <DialogTitle>Add Client</DialogTitle>\n            <DialogDescription>\n              Create a new client. The ID is auto-generated from the name.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"flex flex-col gap-4\">\n            {addError && (\n              <p className=\"text-sm text-destructive\">{addError}</p>\n            )}\n            <div className=\"flex flex-col gap-1.5\">\n              <Label htmlFor=\"client-name\">Name</Label>\n              <Input\n                id=\"client-name\"\n                placeholder=\"Client name\"\n                value={newName}\n                onChange={(e) => setNewName(e.target.value)}\n              />\n            </div>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"client-rate\">Hourly Rate</Label>\n                <Input\n                  id=\"client-rate\"\n                  type=\"number\"\n                  placeholder=\"e.g. 75\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={newRate}\n                  onChange={(e) => setNewRate(e.target.value)}\n                  disabled={!!newFlatRate.trim()}\n                />\n              </div>\n              <div className=\"flex flex-col gap-1.5\">\n                <Label htmlFor=\"client-flat-rate\">Flat Rate</Label>\n                <Input\n                  id=\"client-flat-rate\"\n                  type=\"number\"\n                  placeholder=\"e.g. 5000\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={newFlatRate}\n                  onChange={(e) => setNewFlatRate(e.target.value)}\n                  disabled={!!newRate.trim()}\n                />\n              </div>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Set either an hourly rate or a flat rate, not both.</p>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setAddDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button onClick={handleAddClient} disabled={saving || !newName.trim()}>\n              {saving ? \"Saving...\" : \"Add Client\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}