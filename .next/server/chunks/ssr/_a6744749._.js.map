{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../app/archives/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport { DashboardHeader } from \"@/components/dashboard-header\"\nimport { DashboardFooter } from \"@/components/dashboard-footer\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\"\nimport type { Invoice, Client } from \"@/lib/project-data\"\nimport { fetchAllInvoices, fetchClients } from \"@/lib/supabase\"\nimport { useAuth } from \"@/lib/auth-context\"\n\nfunction formatCurrency(n: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2,\n  }).format(n)\n}\n\nexport default function ArchivesPage() {\n  const { supabase } = useAuth()\n  const [invoices, setInvoices] = useState<Invoice[]>([])\n  const [clients, setClients] = useState<Client[]>([])\n  const [loaded, setLoaded] = useState(false)\n\n  useEffect(() => {\n    let cancelled = false\n\n    async function load() {\n      try {\n        const [inv, cl] = await Promise.all([\n          fetchAllInvoices(supabase),\n          fetchClients(supabase),\n        ])\n        if (cancelled) return\n        setInvoices(inv)\n        setClients(cl)\n      } catch {\n        // silent\n      } finally {\n        if (!cancelled) setLoaded(true)\n      }\n    }\n\n    load()\n    return () => { cancelled = true }\n  }, [supabase])\n\n  const clientName = (clientId: string) =>\n    clients.find((c) => c.id === clientId)?.name ?? clientId\n\n  return (\n    <div className=\"flex min-h-screen flex-col\">\n      <DashboardHeader clientName=\"Archives\" />\n      <main className=\"mx-auto w-full max-w-7xl flex-1 px-4 py-6 sm:px-6 lg:px-8 flex flex-col gap-8\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Archived Invoices</CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Invoice #</TableHead>\n                    <TableHead>Client</TableHead>\n                    <TableHead>Period</TableHead>\n                    <TableHead className=\"text-right\">Time</TableHead>\n                    <TableHead className=\"text-right\">Subs</TableHead>\n                    <TableHead className=\"text-right\">Payables</TableHead>\n                    <TableHead className=\"text-right\">Grand Total</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {!loaded ? (\n                    <TableRow>\n                      <TableCell colSpan={7} className=\"py-8 text-center text-muted-foreground\">\n                        Loading...\n                      </TableCell>\n                    </TableRow>\n                  ) : invoices.length === 0 ? (\n                    <TableRow>\n                      <TableCell colSpan={7} className=\"py-8 text-center text-muted-foreground\">\n                        No archived invoices yet.\n                      </TableCell>\n                    </TableRow>\n                  ) : (\n                    invoices.map((inv) => {\n                      const periodLabel = inv.periodStart && inv.periodEnd\n                        ? `${new Date(inv.periodStart + \"T00:00:00\").toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\" })} - ${new Date(inv.periodEnd + \"T00:00:00\").toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\", year: \"numeric\" })}`\n                        : \"N/A\"\n\n                      return (\n                        <TableRow key={inv.id}>\n                          <TableCell className=\"font-medium\">\n                            <Link\n                              href={`/client/${inv.clientId}?invoice=${inv.id}`}\n                              className=\"text-primary hover:underline\"\n                            >\n                              {inv.invoiceNumber}\n                            </Link>\n                          </TableCell>\n                          <TableCell>{clientName(inv.clientId)}</TableCell>\n                          <TableCell className=\"text-muted-foreground\">{periodLabel}</TableCell>\n                          <TableCell className=\"text-right font-mono\">{formatCurrency(inv.totalTime)}</TableCell>\n                          <TableCell className=\"text-right font-mono\">{formatCurrency(inv.totalSubscriptions)}</TableCell>\n                          <TableCell className=\"text-right font-mono\">{formatCurrency(inv.totalPayables)}</TableCell>\n                          <TableCell className=\"text-right font-mono font-semibold text-primary\">\n                            {formatCurrency(inv.grandTotal)}\n                          </TableCell>\n                        </TableRow>\n                      )\n                    })\n                  )}\n                </TableBody>\n              </Table>\n            </div>\n          </CardContent>\n        </Card>\n      </main>\n      <DashboardFooter />\n    </div>\n  )\n}\n"],"names":["module","exports","require","vendored","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0]}